var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,b){var l=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(l=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,l)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,l){a=a.split(".");l=l||goog.global;a[0]in l||!l.execScript||l.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?l[d]=b:l=l[d]?l[d]:l[d]={}};goog.getObjectByName=function(a,b){for(var l=a.split("."),d=b||goog.global,m;m=l.shift();)if(goog.isDefAndNotNull(d[m]))d=d[m];else return null;return d};
goog.globalize=function(a,b){var l=b||goog.global,d;for(d in a)l[d]=a[d]};goog.addDependency=function(a,b,l){if(!COMPILED){var d;a=a.replace(/\\/g,"/");for(var m=goog.dependencies_,r=0;d=b[r];r++)m.nameToPath[d]=a,a in m.pathToNames||(m.pathToNames[a]={}),m.pathToNames[a][d]=!0;for(d=0;b=l[d];d++)a in m.requires||(m.requires[a]={}),m.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var l=a[b].src,d=l.lastIndexOf("?"),d=
-1==d?l.length:d;if("base.js"==l.substr(d-7,7)){goog.basePath=l.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(m){if(!(m in d.written)){if(!(m in d.visited)&&(d.visited[m]=!0,m in d.requires))for(var n in d.requires[m])if(!goog.isProvided_(n))if(n in d.nameToPath)a(d.nameToPath[n]);else throw Error("Undefined nameToPath for "+n);m in l||(l[m]=!0,b.push(m))}}var b=[],l={},d=goog.dependencies_,m;for(m in goog.included_)d.written[m]||a(m);for(m=0;m<b.length;m++)if(b[m])goog.importScript_(goog.basePath+b[m]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var l=Object.prototype.toString.call(a);if("[object Window]"==l)return"object";if("[object Array]"==l||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==l||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},l;for(l in a)b[l]=goog.cloneObject(a[l]);return b}return a};goog.bindNative_=function(a,b,l){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,l){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(m,d);return a.apply(b,m)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,l){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var l=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,l);return a.apply(this,b)}};goog.mixin=function(a,b){for(var l in b)a[l]=b[l]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,l=b.createElement("script");l.type="text/javascript";l.defer=!1;l.appendChild(b.createTextNode(a));b.body.appendChild(l);
b.body.removeChild(l)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var l=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],n=0;n<a.length;n++)b.push(l(a[n]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?l:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var l=b||{},d;for(d in l){var m=(""+l[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),m)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,l){goog.exportPath_(a,b,l)};goog.exportProperty=function(a,b,l){a[b]=l};
goog.inherits=function(a,b){function l(){}l.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new l;a.prototype.constructor=a};
goog.base=function(a,b,l){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var m=Array.prototype.slice.call(arguments,2),r=!1,n=a.constructor;n;n=n.superClass_&&n.superClass_.constructor)if(n.prototype[b]===d)r=!0;else if(r)return n.prototype[b].apply(a,
m);if(a[b]===d)return a.constructor.prototype[b].apply(a,m);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};/*

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(a){function b(a,c,b){b=(b||0)-1;for(var e=a.length;++b<e;)if(a[b]===c)return b;return-1}function l(a,c){var e=typeof c;a=a.cache;if("boolean"==e||null==c)return a[c];"number"!=e&&"string"!=e&&(e="object");var h="number"==e?c:aa+c;a=a[e]||(a[e]={});return"object"==e?a[h]&&-1<b(a[h],c)?0:-1:a[h]?0:-1}function d(a){var c=this.cache,b=typeof a;if("boolean"==b||null==a)c[a]=!0;else{"number"!=b&&"string"!=b&&(b="object");var e="number"==b?a:aa+a,h=c[b]||(c[b]={});"object"==b?(h[e]||(h[e]=[])).push(a)==
this.array.length&&(c[b]=!1):h[e]=!0}}function m(a){return a.charCodeAt(0)}function r(a,c){var b=a.index,e=c.index;a=a.criteria;c=c.criteria;if(a!==c){if(a>c||"undefined"==typeof a)return 1;if(a<c||"undefined"==typeof c)return-1}return b<e?-1:1}function n(a){var c=-1,b=a.length,e=w();e["false"]=e["null"]=e["true"]=e.undefined=!1;var p=w();p.array=a;p.cache=e;for(p.push=d;++c<b;)p.push(a[c]);return!1===e.object?(h(p),null):p}function z(a){return"\\"+Ca[a]}function u(){return s.pop()||[]}function w(){return x.pop()||
{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function y(a){a.length=0;s.length<v&&s.push(a)}function h(a){var c=a.cache;c&&h(c);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;x.length<v&&x.push(a)}function c(a,c,b){c||(c=0);"undefined"==typeof b&&(b=a?a.length:0);var e=-1;b=b-c||0;for(var h=Array(0>b?0:b);++e<b;)h[e]=a[c+e];return h}function e(d){function f(a){return a&&
"object"==typeof a&&!L(a)&&F.call(a,"__wrapped__")?a:new s(a)}function s(a){this.__wrapped__=a}function v(a,g,k,q){function c(){var q=arguments,h=f?this:g;R||(a=g[b]);k.length&&(q=q.length?(q=E.call(q),e?q.concat(k):k.concat(q)):k);return this instanceof c?(h=N(a.prototype)?pa(a.prototype):{},q=a.apply(h,q),N(q)?q:h):a.apply(h,q)}var R=V(a),f=!k,b=g;if(f){var e=q;k=g}else if(!R){if(!q)throw new ub;g=a}return c}function x(a){return Xa[a]}function K(a,g,k){var q=(q=f.indexOf)===Ya?b:q;return q}function $(a){return function(g,
k,q,c){"boolean"!=typeof k&&null!=k&&(q=(c=q)&&c[k]===g?p:k,k=!1);null!=q&&(q=f.createCallback(q,c));return a(g,k,q,c)}}function Ca(a){var g,k;if(!a||G.call(a)!=W||(g=a.constructor,V(g)&&!(g instanceof g)))return!1;Z(a,function(g,a){k=a});return k===p||F.call(a,k)}function vb(a){return wb[a]}function Da(a,g,k,q,A,R){var b=a;"boolean"!=typeof g&&null!=g&&(q=k,k=g,g=!1);if("function"==typeof k){k="undefined"==typeof q?k:f.createCallback(k,q,1);b=k(b);if("undefined"!=typeof b)return b;b=a}if(q=N(b)){var e=
G.call(b);if(!O[e])return b;var B=L(b)}if(!q||!g)return q?B?c(b):Ea({},b):b;q=S[e];switch(e){case fa:case ga:return new q(+b);case ha:case ba:return new q(b);case ia:return q(b.source,xb.exec(b))}e=!A;A||(A=u());R||(R=u());for(var h=A.length;h--;)if(A[h]==a)return R[h];b=B?q(b.length):{};B&&(F.call(a,"index")&&(b.index=a.index),F.call(a,"input")&&(b.input=a.input));A.push(a);R.push(b);(B?C:D)(a,function(a,q){b[q]=Da(a,g,k,p,A,R)});e&&(y(A),y(R));return b}function qa(a){var g=[];Z(a,function(a,q){V(a)&&
g.push(q)});return g.sort()}function Za(a){for(var g=-1,k=M(a),q=k.length,c={};++g<q;){var b=k[g];c[a[b]]=b}return c}function ca(a,g,k,q,c,b){var e=k===T;if("function"==typeof k&&!e){k=f.createCallback(k,q,2);var h=k(a,g);if("undefined"!=typeof h)return!!h}if(a===g)return 0!==a||1/a==1/g;var B=typeof a,d=typeof g;if(a===a&&(!a||"function"!=B&&"object"!=B)&&(!g||"function"!=d&&"object"!=d))return!1;if(null==a||null==g)return a===g;d=G.call(a);B=G.call(g);d==ja&&(d=W);B==ja&&(B=W);if(d!=B)return!1;
switch(d){case fa:case ga:return+a==+g;case ha:return a!=+a?g!=+g:0==a?1/a==1/g:a==+g;case ia:case ba:return a==U(g)}B=d==ra;if(!B){if(F.call(a,"__wrapped__ ")||F.call(g,"__wrapped__"))return ca(a.__wrapped__||a,g.__wrapped__||g,k,q,c,b);if(d!=W)return!1;var d=a.constructor,p=g.constructor;if(d!=p&&!(V(d)&&d instanceof d&&V(p)&&p instanceof p))return!1}p=!c;c||(c=u());b||(b=u());for(d=c.length;d--;)if(c[d]==a)return b[d]==g;var m=0,h=!0;c.push(a);b.push(g);if(B){d=a.length;m=g.length;h=m==a.length;
if(!h&&!e)return h;for(;m--;)if(B=d,p=g[m],e)for(;B--&&!(h=ca(a[B],p,k,q,c,b)););else if(!(h=ca(a[m],p,k,q,c,b)))break;return h}Z(g,function(g,f,e){if(F.call(e,f))return m++,h=F.call(a,f)&&ca(a[f],g,k,q,c,b)});h&&!e&&Z(a,function(g,a,k){if(F.call(k,a))return h=-1<--m});p&&(y(c),y(b));return h}function V(a){return"function"==typeof a}function N(a){return!(!a||!J[typeof a])}function $a(a){return"number"==typeof a||G.call(a)==ha}function ka(a){return"string"==typeof a||G.call(a)==ba}function ab(a,g,
k){var q=arguments,c=0,b=2;if(!N(a))return a;if(k===T)var e=q[3],h=q[4],d=q[5];else{var p=!0,h=u(),d=u();"number"!=typeof k&&(b=q.length);3<b&&"function"==typeof q[b-2]?e=f.createCallback(q[--b-1],q[b--],2):2<b&&"function"==typeof q[b-1]&&(e=q[--b])}for(;++c<b;)(L(q[c])?C:D)(q[c],function(g,k){var q,c,A=g,b=a[k];if(g&&((c=L(g))||Fa(g))){for(A=h.length;A--;)if(q=h[A]==g){b=d[A];break}if(!q){var f;e&&(A=e(b,g),f="undefined"!=typeof A)&&(b=A);f||(b=c?L(b)?b:[]:Fa(b)?b:{});h.push(g);d.push(b);f||(b=ab(b,
g,T,e,h,d))}}else e&&(A=e(b,g),"undefined"==typeof A&&(A=g)),"undefined"!=typeof A&&(b=A);a[k]=b});p&&(y(h),y(d));return a}function Ga(a){for(var g=-1,k=M(a),q=k.length,c=H(q);++g<q;)c[g]=a[k[g]];return c}function bb(a,g,k){var q=-1,c=K(),b=a?a.length:0,f=!1;k=(0>k?P(0,b+k):k)||0;b&&"number"==typeof b?f=-1<(ka(a)?a.indexOf(g,k):c(a,g,k)):D(a,function(a){if(++q>=k)return!(f=a===g)});return f}function cb(a,g,k){var q=!0;g=f.createCallback(g,k);k=-1;var c=a?a.length:0;if("number"==typeof c)for(;++k<
c&&(q=!!g(a[k],k,a)););else D(a,function(a,k,c){return q=!!g(a,k,c)});return q}function sa(a,g,k){var c=[];g=f.createCallback(g,k);k=-1;var b=a?a.length:0;if("number"==typeof b)for(;++k<b;){var e=a[k];g(e,k,a)&&c.push(e)}else D(a,function(a,k,b){g(a,k,b)&&c.push(a)});return c}function Ha(a,g,k){g=f.createCallback(g,k);k=-1;var c=a?a.length:0;if("number"==typeof c)for(;++k<c;){var b=a[k];if(g(b,k,a))return b}else{var e;D(a,function(a,k,c){if(g(a,k,c))return e=a,!1});return e}}function C(a,g,k){var c=
-1,b=a?a.length:0;g=g&&"undefined"==typeof k?g:f.createCallback(g,k);if("number"==typeof b)for(;++c<b&&!1!==g(a[c],c,a););else D(a,g);return a}function Ia(a,g,k){var c=-1,b=a?a.length:0;g=f.createCallback(g,k);if("number"==typeof b)for(var e=H(b);++c<b;)e[c]=g(a[c],c,a);else e=[],D(a,function(a,k,b){e[++c]=g(a,k,b)});return e}function db(a,g,k){var c=-Infinity,b=c;if(!g&&L(a)){k=-1;for(var e=a.length;++k<e;){var h=a[k];h>b&&(b=h)}}else g=!g&&ka(a)?m:f.createCallback(g,k),C(a,function(a,k,f){k=g(a,
k,f);k>c&&(c=k,b=a)});return b}function Ja(a,g){var k=-1,c=a?a.length:0;if("number"==typeof c)for(var b=H(c);++k<c;)b[k]=a[k][g];return b||Ia(a,g)}function Ka(a,g,k,c){if(!a)return k;var b=3>arguments.length;g=f.createCallback(g,c,4);var e=-1,h=a.length;if("number"==typeof h)for(b&&(k=a[++e]);++e<h;)k=g(k,a[e],e,a);else D(a,function(a,c,q){k=b?(b=!1,a):g(k,a,c,q)});return k}function eb(a,g,k,c){var b=a?a.length:0,e=3>arguments.length;if("number"!=typeof b)var h=M(a),b=h.length;g=f.createCallback(g,
c,4);C(a,function(c,q,f){q=h?h[--b]:--b;k=e?(e=!1,a[q]):g(k,a[q],q,f)});return k}function fb(a,g,k){var c;g=f.createCallback(g,k);k=-1;var b=a?a.length:0;if("number"==typeof b)for(;++k<b&&!(c=g(a[k],k,a)););else D(a,function(a,k,b){return!(c=g(a,k,b))});return!!c}function gb(a){var g=-1,k=K(),c=a?a.length:0,f=da.apply(I,E.call(arguments,1)),e=[],d=c>=t&&k===b;if(d){var p=n(f);p?(k=l,f=p):d=!1}for(;++g<c;)p=a[g],0>k(f,p)&&e.push(p);d&&h(f);return e}function La(a,g,k){if(a){var b=0,e=a.length;if("number"!=
typeof g&&null!=g){var h=-1;for(g=f.createCallback(g,k);++h<e&&g(a[h],h,a);)b++}else if(b=g,null==b||k)return a[0];return c(a,0,ta(P(0,b),e))}}function Ya(a,g,k){if("number"==typeof k){var c=a?a.length:0;k=0>k?P(0,c+k):k||0}else if(k)return k=hb(a,g),a[k]===g?k:-1;return a?b(a,g,k):-1}function Ma(a,g,k){if("number"!=typeof g&&null!=g){var b=0,e=-1,h=a?a.length:0;for(g=f.createCallback(g,k);++e<h&&g(a[e],e,a);)b++}else b=null==g||k?1:P(0,g);return c(a,b)}function hb(a,g,k,c){var b=0,e=a?a.length:b;
k=k?f.createCallback(k,c,1):Na;for(g=k(g);b<e;)c=b+e>>>1,k(a[c])<g?b=c+1:e=c;return b}function ib(a){for(var g=-1,k=a?db(Ja(a,"length")):0,c=H(0>k?0:k);++g<k;)c[g]=Ja(a,g);return c}function jb(a,g){for(var k=-1,c=a?a.length:0,b={};++k<c;){var e=a[k];g?b[e]=g[k]:b[e[0]]=e[1]}return b}function Oa(a,g){return kb.fastBind||X&&2<arguments.length?X.call.apply(X,arguments):v(a,g,E.call(arguments,2))}function lb(a,g,k){function c(){ua(l);ua(t);p=0;l=t=null}function b(){var g=s&&(!r||1<p);c();g&&(!1!==n&&
(m=new va),h=a.apply(d,f))}function e(){c();if(s||n!==g)m=new va,h=a.apply(d,f)}var f,h,d,p=0,m=0,n=!1,l=null,t=null,s=!0;g=P(0,g||0);if(!0===k)var r=!0,s=!1;else N(k)&&(r=k.leading,n="maxWait"in k&&P(g,k.maxWait||0),s="trailing"in k?k.trailing:s);return function(){f=arguments;d=this;p++;ua(t);if(!1===n)r&&2>p&&(h=a.apply(d,f));else{var k=new va;l||r||(m=k);var c=n-(k-m);0>=c?(ua(l),l=null,m=k,h=a.apply(d,f)):l||(l=wa(e,c))}g!==n&&(t=wa(b,g));return h}}function mb(a){var g=E.call(arguments,1);return wa(function(){a.apply(p,
g)},1)}function Na(a){return a}function nb(a){C(qa(a),function(g){var k=f[g]=a[g];f.prototype[g]=function(){var a=this.__wrapped__,g=[a];xa.apply(g,arguments);g=k.apply(f,g);return a&&"object"==typeof a&&a===g?this:new s(g)}})}function ob(){return this.__wrapped__}d=d?Y.defaults(a.Object(),d,Y.pick(a,yb)):a;var H=d.Array,la=d.Boolean,va=d.Date,Pa=d.Function,Q=d.Math,zb=d.Number,ma=d.Object,Qa=d.RegExp,U=d.String,ub=d.TypeError,I=[],Ra=ma.prototype,Ab=d._,ea=Qa("^"+U(Ra.valueOf).replace(/[.*+?^${}()|[\]\\]/g,
"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Bb=Q.ceil,ua=d.clearTimeout,da=I.concat,pb=Q.floor,Cb=Pa.prototype.toString,na=ea.test(na=ma.getPrototypeOf)&&na,F=Ra.hasOwnProperty,xa=I.push,ya=d.setImmediate,wa=d.setTimeout,G=Ra.toString,X=ea.test(X=G.bind)&&X,pa=ea.test(pa=ma.create)&&pa,Sa=ea.test(Sa=H.isArray)&&Sa,Db=d.isFinite,Eb=d.isNaN,za=ea.test(za=ma.keys)&&za,P=Q.max,ta=Q.min,Ta=d.parseInt,qb=Q.random,E=I.slice,Q=ea.test(d.attachEvent),Q=X&&!/\n|true/.test(X+Q),S={};S[ra]=H;S[fa]=la;S[ga]=
va;S[rb]=Pa;S[W]=ma;S[ha]=zb;S[ia]=Qa;S[ba]=U;s.prototype=f.prototype;var kb=f.support={};kb.fastBind=X&&!Q;f.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:sb,variable:"",imports:{_:f}};var L=Sa,la=function(a){var g,k=[];if(!a||!J[typeof a])return k;for(g in a)F.call(a,g)&&k.push(g);return k},M=za?function(a){return N(a)?za(a):[]}:la,Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wb=Za(Xa),Ea=function(a,g,k){var c,b=a,e=b;if(!b)return e;var h=
arguments,d=0,p="number"==typeof k?2:h.length;if(3<p&&"function"==typeof h[p-2])var m=f.createCallback(h[--p-1],h[p--],2);else 2<p&&"function"==typeof h[p-1]&&(m=h[--p]);for(;++d<p;)if((b=h[d])&&J[typeof b])for(var l=-1,n=J[typeof b]&&M(b),t=n?n.length:0;++l<t;)c=n[l],e[c]=m?m(e[c],b[c]):b[c];return e},Ua=function(a,g,k){var c,b=a,e=b;if(!b)return e;for(var f=arguments,h=0,d="number"==typeof k?2:f.length;++h<d;)if((b=f[h])&&J[typeof b])for(var p=-1,m=J[typeof b]&&M(b),n=m?m.length:0;++p<n;)c=m[p],
"undefined"==typeof e[c]&&(e[c]=b[c]);return e},Z=function(a,g,k){var c;if(!a||!J[typeof a])return a;g=g&&"undefined"==typeof k?g:f.createCallback(g,k);for(c in a)if(!1===g(a[c],c,a))break;return a},D=function(a,g,k){if(!a||!J[typeof a])return a;g=g&&"undefined"==typeof k?g:f.createCallback(g,k);for(var c=-1,b=J[typeof a]&&M(a),e=b?b.length:0;++c<e&&(k=b[c],!1!==g(a[k],k,a)););return a},Fa=function(a){if(!a||G.call(a)!=W)return!1;var g=a.valueOf,k="function"==typeof g&&(k=na(g))&&na(k);return k?a==
k||na(a)==k:Ca(a)},la=$(function g(a,c,b){for(var e=-1,f=a?a.length:0,h=[];++e<f;){var d=a[e];b&&(d=b(d,e,a));L(d)?xa.apply(h,c?d:g(d)):h.push(d)}return h}),Va=$(function(a,c,e){var f=-1,d=K(),p=a?a.length:0,m=[],s=!c&&p>=t&&d===b,r=e||s?u():m;if(s){var v=n(r);v?(d=l,r=v):(s=!1,r=e?r:(y(r),m))}for(;++f<p;){var v=a[f],x=e?e(v,f,a):v;if(c?!f||r[r.length-1]!==x:0>d(r,x))(e||s)&&r.push(x),m.push(v)}s?(y(r.array),h(r)):e&&y(r);return m});Q&&(Wa&&"function"==typeof ya)&&(mb=Oa(ya,d));ya=8==Ta(tb+"08")?
Ta:function(a,c){return Ta(ka(a)?a.replace(Fb,""):a,c||0)};f.after=function(a,c){return 1>a?c():function(){if(1>--a)return c.apply(this,arguments)}};f.assign=Ea;f.at=function(a){for(var c=-1,b=da.apply(I,E.call(arguments,1)),e=b.length,f=H(e);++c<e;)f[c]=a[b[c]];return f};f.bind=Oa;f.bindAll=function(a){for(var c=1<arguments.length?da.apply(I,E.call(arguments,1)):qa(a),b=-1,e=c.length;++b<e;){var f=c[b];a[f]=Oa(a[f],a)}return a};f.bindKey=function(a,c){return v(a,c,E.call(arguments,2),T)};f.compact=
function(a){for(var c=-1,b=a?a.length:0,e=[];++c<b;){var f=a[c];f&&e.push(f)}return e};f.compose=function(){var a=arguments;return function(){for(var c=arguments,b=a.length;b--;)c=[a[b].apply(this,c)];return c[0]}};f.countBy=function(a,c,b){var e={};c=f.createCallback(c,b);C(a,function(a,g,b){g=U(c(a,g,b));F.call(e,g)?e[g]++:e[g]=1});return e};f.createCallback=function(a,c,b){if(null==a)return Na;var e=typeof a;if("function"!=e){if("object"!=e)return function(c){return c[a]};var f=M(a);return function(c){for(var k=
f.length,b=!1;k--&&(b=ca(c[f[k]],a[f[k]],T)););return b}}return"undefined"==typeof c||oa&&!oa.test(Cb.call(a))?a:1===b?function(b){return a.call(c,b)}:2===b?function(b,e){return a.call(c,b,e)}:4===b?function(b,e,f,q){return a.call(c,b,e,f,q)}:function(b,e,f){return a.call(c,b,e,f)}};f.debounce=lb;f.defaults=Ua;f.defer=mb;f.delay=function(a,c){var b=E.call(arguments,2);return wa(function(){a.apply(p,b)},c)};f.difference=gb;f.filter=sa;f.flatten=la;f.forEach=C;f.forIn=Z;f.forOwn=D;f.functions=qa;f.groupBy=
function(a,c,b){var e={};c=f.createCallback(c,b);C(a,function(a,g,b){g=U(c(a,g,b));(F.call(e,g)?e[g]:e[g]=[]).push(a)});return e};f.initial=function(a,b,e){if(!a)return[];var h=0,d=a.length;if("number"!=typeof b&&null!=b){var p=d;for(b=f.createCallback(b,e);p--&&b(a[p],p,a);)h++}else h=null==b||e?1:b||h;return c(a,0,ta(P(0,d-h),d))};f.intersection=function(a){for(var c=arguments,e=c.length,f=-1,d=u(),p=-1,m=K(),s=a?a.length:0,r=[],v=u();++f<e;){var x=c[f];d[f]=m===b&&(x?x.length:0)>=t&&n(f?c[f]:v)}a:for(;++p<
s;){var w=d[0],x=a[p];if(0>(w?l(w,x):m(v,x))){f=e;for((w||v).push(x);--f;)if(w=d[f],0>(w?l(w,x):m(c[f],x)))continue a;r.push(x)}}for(;e--;)(w=d[e])&&h(w);y(d);y(v);return r};f.invert=Za;f.invoke=function(a,c){var b=E.call(arguments,2),e=-1,f="function"==typeof c,h=a?a.length:0,d=H("number"==typeof h?h:0);C(a,function(a){d[++e]=(f?c:a[c]).apply(a,b)});return d};f.keys=M;f.map=Ia;f.max=db;f.memoize=function(a,c){function b(){var e=b.cache,f=aa+(c?c.apply(this,arguments):arguments[0]);return F.call(e,
f)?e[f]:e[f]=a.apply(this,arguments)}b.cache={};return b};f.merge=ab;f.min=function(a,c,b){var e=Infinity,h=e;if(!c&&L(a)){b=-1;for(var d=a.length;++b<d;){var p=a[b];p<h&&(h=p)}}else c=!c&&ka(a)?m:f.createCallback(c,b),C(a,function(a,g,b){g=c(a,g,b);g<e&&(e=g,h=a)});return h};f.omit=function(a,c,b){var e=K(),h="function"==typeof c,d={};if(h)c=f.createCallback(c,b);else var p=da.apply(I,E.call(arguments,1));Z(a,function(a,g,b){if(h?!c(a,g,b):0>e(p,g))d[g]=a});return d};f.once=function(a){var c,b;return function(){if(c)return b;
c=!0;b=a.apply(this,arguments);a=null;return b}};f.pairs=function(a){for(var c=-1,b=M(a),e=b.length,f=H(e);++c<e;){var h=b[c];f[c]=[h,a[h]]}return f};f.partial=function(a){return v(a,E.call(arguments,1))};f.partialRight=function(a){return v(a,E.call(arguments,1),null,T)};f.pick=function(a,c,b){var e={};if("function"!=typeof c)for(var h=-1,d=da.apply(I,E.call(arguments,1)),p=N(a)?d.length:0;++h<p;){var m=d[h];m in a&&(e[m]=a[m])}else c=f.createCallback(c,b),Z(a,function(a,b,g){c(a,b,g)&&(e[b]=a)});
return e};f.pluck=Ja;f.range=function(a,c,b){a=+a||0;b=+b||1;null==c&&(c=a,a=0);var e=-1;c=P(0,Bb((c-a)/b));for(var f=H(c);++e<c;)f[e]=a,a+=b;return f};f.reject=function(a,c,b){c=f.createCallback(c,b);return sa(a,function(a,b,g){return!c(a,b,g)})};f.rest=Ma;f.shuffle=function(a){var c=-1,b=a?a.length:0,e=H("number"==typeof b?b:0);C(a,function(a){var b=pb(qb()*(++c+1));e[c]=e[b];e[b]=a});return e};f.sortBy=function(a,c,b){var e=-1,d=a?a.length:0,p=H("number"==typeof d?d:0);c=f.createCallback(c,b);
C(a,function(a,b,g){var f=p[++e]=w();f.criteria=c(a,b,g);f.index=e;f.value=a});d=p.length;for(p.sort(r);d--;)a=p[d],p[d]=a.value,h(a);return p};f.tap=function(a,c){c(a);return a};f.throttle=function(a,c,b){var e=!0,f=!0;!1===b?e=!1:N(b)&&(e="leading"in b?b.leading:e,f="trailing"in b?b.trailing:f);b=w();b.leading=e;b.maxWait=c;b.trailing=f;a=lb(a,c,b);h(b);return a};f.times=function(a,c,b){a=-1<(a=+a)?a:0;var e=-1,h=H(a);for(c=f.createCallback(c,b,1);++e<a;)h[e]=c(e);return h};f.toArray=function(a){return a&&
"number"==typeof a.length?c(a):Ga(a)};f.transform=function(a,c,b,e){var h=L(a);c=f.createCallback(c,e,4);null==b&&(h?b=[]:(e=(e=a&&a.constructor)&&e.prototype,b=N(e)?pa(e):{}));(h?C:D)(a,function(a,g,e){return c(b,a,g,e)});return b};f.union=function(a){L(a)||(arguments[0]=a?E.call(a):I);return Va(da.apply(I,arguments))};f.uniq=Va;f.unzip=ib;f.values=Ga;f.where=sa;f.without=function(a){return gb(a,E.call(arguments,1))};f.wrap=function(a,c){return function(){var b=[a];xa.apply(b,arguments);return c.apply(this,
b)}};f.zip=function(a){return a?ib(arguments):[]};f.zipObject=jb;f.collect=Ia;f.drop=Ma;f.each=C;f.extend=Ea;f.methods=qa;f.object=jb;f.select=sa;f.tail=Ma;f.unique=Va;nb(f);f.chain=f;f.prototype.chain=function(){return this};f.clone=Da;f.cloneDeep=function(a,c,b){return Da(a,!0,c,b)};f.contains=bb;f.escape=function(a){return null==a?"":U(a).replace(Gb,x)};f.every=cb;f.find=Ha;f.findIndex=function(a,c,b){var e=-1,h=a?a.length:0;for(c=f.createCallback(c,b);++e<h;)if(c(a[e],e,a))return e;return-1};
f.findKey=function(a,c,b){var e;c=f.createCallback(c,b);D(a,function(a,b,g){if(c(a,b,g))return e=b,!1});return e};f.has=function(a,c){return a?F.call(a,c):!1};f.identity=Na;f.indexOf=Ya;f.isArguments=function(a){return G.call(a)==ja};f.isArray=L;f.isBoolean=function(a){return!0===a||!1===a||G.call(a)==fa};f.isDate=function(a){return a?"object"==typeof a&&G.call(a)==ga:!1};f.isElement=function(a){return a?1===a.nodeType:!1};f.isEmpty=function(a){var c=!0;if(!a)return c;var b=G.call(a),e=a.length;if(b==
ra||(b==ba||b==ja)||b==W&&"number"==typeof e&&V(a.splice))return!e;D(a,function(){return c=!1});return c};f.isEqual=ca;f.isFinite=function(a){return Db(a)&&!Eb(parseFloat(a))};f.isFunction=V;f.isNaN=function(a){return $a(a)&&a!=+a};f.isNull=function(a){return null===a};f.isNumber=$a;f.isObject=N;f.isPlainObject=Fa;f.isRegExp=function(a){return a?"object"==typeof a&&G.call(a)==ia:!1};f.isString=ka;f.isUndefined=function(a){return"undefined"==typeof a};f.lastIndexOf=function(a,c,b){var e=a?a.length:
0;for("number"==typeof b&&(e=(0>b?P(0,e+b):ta(b,e-1))+1);e--;)if(a[e]===c)return e;return-1};f.mixin=nb;f.noConflict=function(){d._=Ab;return this};f.parseInt=ya;f.random=function(a,c){null==a&&null==c&&(c=1);a=+a||0;null==c?(c=a,a=0):c=+c||0;var b=qb();return a%1||c%1?a+ta(b*(c-a+parseFloat("1e-"+((b+"").length-1))),c):a+pb(b*(c-a+1))};f.reduce=Ka;f.reduceRight=eb;f.result=function(a,c){var b=a?a[c]:p;return V(b)?a[c]():b};f.runInContext=e;f.size=function(a){var c=a?a.length:0;return"number"==typeof c?
c:M(a).length};f.some=fb;f.sortedIndex=hb;f.template=function(a,c,b){var e=f.templateSettings;a||(a="");b=Ua({},b,e);var h=Ua({},b.imports,e.imports),e=M(h),h=Ga(h),d,m=0,n=b.interpolate||Aa,l="__p += '",n=Qa((b.escape||Aa).source+"|"+n.source+"|"+(n===sb?Hb:Aa).source+"|"+(b.evaluate||Aa).source+"|$","g");a.replace(n,function(c,b,e,f,k,h){e||(e=f);l+=a.slice(m,h).replace(Ib,z);b&&(l+="' +\n__e("+b+") +\n'");k&&(d=!0,l+="';\n"+k+";\n__p += '");e&&(l+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'");
m=h+c.length;return c});var l=l+"';\n",s=n=b.variable;s||(n="obj",l="with ("+n+") {\n"+l+"\n}\n");l=(d?l.replace(Jb,""):l).replace(Kb,"$1").replace(Lb,"$1;");l="function("+n+") {\n"+(s?"":n+" || ("+n+" = {});\n")+"var __t, __p = '', __e = _.escape"+(d?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";b="\n/*\n//@ sourceURL="+(b.sourceURL||"/lodash/template/source["+Mb++ +"]")+"\n*/";try{var t=Pa(e,"return "+l+b).apply(p,h)}catch(r){throw r.source=
l,r;}if(c)return t(c);t.source=l;return t};f.unescape=function(a){return null==a?"":U(a).replace(Nb,vb)};f.uniqueId=function(a){var c=++Ba;return U(null==a?"":a)+c};f.all=cb;f.any=fb;f.detect=Ha;f.findWhere=Ha;f.foldl=Ka;f.foldr=eb;f.include=bb;f.inject=Ka;D(f,function(a,c){f.prototype[c]||(f.prototype[c]=function(){var c=[this.__wrapped__];xa.apply(c,arguments);return a.apply(f,c)})});f.first=La;f.last=function(a,b,e){if(a){var h=0,d=a.length;if("number"!=typeof b&&null!=b){var p=d;for(b=f.createCallback(b,
e);p--&&b(a[p],p,a);)h++}else if(h=b,null==h||e)return a[d-1];return c(a,P(0,d-h))}};f.take=La;f.head=La;D(f,function(a,c){f.prototype[c]||(f.prototype[c]=function(c,b){var e=a(this.__wrapped__,c,b);return null==c||b&&"function"!=typeof c?e:new s(e)})});f.VERSION="1.3.1";f.prototype.toString=function(){return U(this.__wrapped__)};f.prototype.value=ob;f.prototype.valueOf=ob;C(["join","pop","shift"],function(a){var c=I[a];f.prototype[a]=function(){return c.apply(this.__wrapped__,arguments)}});C(["push",
"reverse","sort","unshift"],function(a){var c=I[a];f.prototype[a]=function(){c.apply(this.__wrapped__,arguments);return this}});C(["concat","slice","splice"],function(a){var c=I[a];f.prototype[a]=function(){return new s(c.apply(this.__wrapped__,arguments))}});return f}var p,s=[],x=[],Ba=0,T={},aa=+new Date+"",t=75,v=40,Jb=/\b__p \+= '';/g,Kb=/\b(__p \+=) '' \+/g,Lb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nb=/&(?:amp|lt|gt|quot|#39);/g,Hb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xb=/\w*$/,sb=/<%=([\s\S]+?)%>/g,oa=
(oa=/\bthis\b/)&&oa.test(e)&&oa,tb=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Fb=RegExp("^["+tb+"]*0+(?=.$)"),Aa=/($^)/,Gb=/[&<>"']/g,Ib=/['\n\r\t\u2028\u2029\\]/g,yb="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),Mb=0,ja="[object Arguments]",ra="[object Array]",fa="[object Boolean]",ga="[object Date]",rb=
"[object Function]",ha="[object Number]",W="[object Object]",ia="[object RegExp]",ba="[object String]",O={};O[rb]=!1;O[ja]=O[ra]=O[fa]=O[ga]=O[ha]=O[W]=O[ia]=O[ba]=!0;var J={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Ca={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},$=J[typeof exports]&&exports,Wa=J[typeof module]&&module&&module.exports==$&&module,K=J[typeof global]&&global;!K||K.global!==K&&K.window!==K||(a=K);var Y=e();"function"==typeof define&&
"object"==typeof define.amd&&define.amd?(a._=Y,define(function(){return Y})):$&&!$.nodeType?Wa?(Wa.exports=Y)._=Y:$._=Y:a._=Y})(this);!function(){function a(a){this.s=null!==a&&void 0!==a?"string"===typeof a?a:a.toString():a;this.orig=a;null!==a&&void 0!==a?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=a.length:this.length=-1}function b(c){return new a(c)}function l(a,b){var h=[],d;for(d=0;d<a.length;d++)h.push(a[d]),b&&b.call(a,a[d],d);return h}var d={},m=String.prototype,r=a.prototype={between:function(c,b){var h=this.s,d=h.indexOf(c),m=h.indexOf(b),l=d+c.length;return new a(m>
d?h.slice(l,m):"")},camelize:function(){var c=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(a,c,b){return b?b.toUpperCase():""});return new a(c)},capitalize:function(){return new a(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(a){return this.s.charAt(a)},chompLeft:function(c){var b=this.s;return 0===b.indexOf(c)?(b=b.slice(c.length),new a(b)):this},chompRight:function(c){if(this.endsWith(c)){var b=this.s,b=b.slice(0,b.length-c.length);return new a(b)}return this},
collapseWhitespace:function(){var c=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new a(c)},contains:function(a){return 0<=this.s.indexOf(a)},count:function(a){for(var b=0,h=this.s.indexOf(a);0<=h;)b+=1,h=this.s.indexOf(a,h+1);return b},dasherize:function(){var c=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new a(c)},decodeHtmlEntities:function(){var c=this.s,c=c.replace(/&#(\d+);?/g,function(a,c){return String.fromCharCode(c)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,
function(a,c){return String.fromCharCode(parseInt(c,16))}).replace(/&([^;\W]+;?)/g,function(a,c){var b=c.replace(/;$/,""),b=d[c]||c.match(/;$/)&&d[b];return"number"===typeof b?String.fromCharCode(b):"string"===typeof b?b:a});return new a(c)},endsWith:function(a){var b=this.s.length-a.length;return 0<=b&&this.s.indexOf(a,b)===b},escapeHTML:function(){return new a(this.s.replace(/[&<>"']/g,function(a){return"&"+y[a]+";"}))},ensureLeft:function(c){var b=this.s;return 0===b.indexOf(c)?this:new a(c+b)},
ensureRight:function(c){var b=this.s;return this.endsWith(c)?this:new a(b+c)},humanize:function(){if(null===this.s||void 0===this.s)return new a("");var c=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new a(c)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&
this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(c){return 0<=c?(c=this.s.substr(0,c),new a(c)):this.right(-c)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(c,b){b=b||" ";if(this.s.length>=c)return new a(this.s);c-=this.s.length;var h=Array(Math.ceil(c/2)+1).join(b),d=Array(Math.floor(c/2)+1).join(b);return new a(h+this.s+d)},padLeft:function(c,
b){b=b||" ";return this.s.length>=c?new a(this.s):new a(Array(c-this.s.length+1).join(b)+this.s)},padRight:function(c,b){b=b||" ";return this.s.length>=c?new a(this.s):new a(this.s+Array(c-this.s.length+1).join(b))},parseCSV:function(a,b,h,d){a=a||",";h=h||"\\";"undefined"==typeof b&&(b='"');var m=0,l=[],n=[],r=this.s.length,t=!1;if("undefined"!==typeof d)var v=[];for(b||(t=!0);m<r;){var u=this.s.charAt(m);switch(u){case h:if(t&&(h!==b||this.s.charAt(m+1)===b)){m+=1;l.push(this.s.charAt(m));break}if(h!==
b)break;case b:t=!t;break;case a:t&&b?l.push(u):(n.push(l.join("")),l.length=0);break;case d:t?l.push(u):v&&(n.push(l.join("")),v.push(n),n=[],l.length=0);break;default:t&&l.push(u)}m+=1}n.push(l.join(""));return v?(v.push(n),v):n},replaceAll:function(b,e){var h=this.s.split(b).join(e);return new a(h)},right:function(b){return 0<=b?(b=this.s.substr(this.s.length-b,b),new a(b)):this.left(-b)},slugify:function(){var b=(new a(this.s.replace(/[^\w\s-]/g,"").toLowerCase())).dasherize().s;"-"===b.charAt(0)&&
(b=b.substr(1));return new a(b)},startsWith:function(a){return 0===this.s.lastIndexOf(a,0)},stripPunctuation:function(){return new a(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var b=this.s;l(0<arguments.length?arguments:[""],function(a){b=b.replace(RegExp("</?"+a+"[^<>]*>","gi"),"")});return new a(b)},template:function(c,e,h){var d=this.s;e=e||b.TMPL_OPEN;h=h||b.TMPL_CLOSE;(d.match(RegExp(e+"(.+?)"+h,"g"))||[]).forEach(function(a){var b=a.substring(e.length,a.length-
h.length);c[b]&&(d=d.replace(a,c[b]))});return new a(d)},times:function(b){return new a(Array(b+1).join(this.s))},toBoolean:function(){if("string"===typeof this.orig){var a=this.s.toLowerCase();return"true"===a||"yes"===a||"on"===a}return!0===this.orig||1===this.orig},toFloat:function(a){var b=parseFloat(this.s);return a?parseFloat(b.toFixed(a)):b},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var b;b="undefined"===typeof m.trim?this.s.replace(/(^\s*|\s*$)/g,
""):this.s.trim();return new a(b)},trimLeft:function(){var b;b=m.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,"");return new a(b)},trimRight:function(){var b;b=m.trimRight?this.s.trimRight():this.s.replace(/\s+$/,"");return new a(b)},truncate:function(b,e){var h=this.s;b=~~b;e=e||"...";if(h.length<=b)return new a(h);var d=h.slice(0,b+1).replace(/.(?=\W*\w*$)/g,function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "}),d=d.slice(d.length-2).match(/\w\w/)?d.replace(/\s*\S+$/,""):(new a(d.slice(0,
d.length-1))).trimRight().s;return(d+e).length>h.length?new a(h):new a(h.slice(0,d.length)+e)},toCSV:function(b,e){var h=",",d='"',m="\\",l=!0,n=!1,r=[];"object"===typeof b?(h=b.delimiter||h,h=b.separator||h,d=b.qualifier||d,l=!!b.encloseNumbers,m=b.escape||m,n=!!b.keys):"string"===typeof b&&(h=b);"string"===typeof e&&(d=e);null===e&&(d=null);if(this.orig instanceof Array)r=this.orig;else for(var t in this.orig)this.orig.hasOwnProperty(t)&&(n?r.push(t):r.push(this.orig[t]));m+=d;n=[];for(t=0;t<r.length;++t){var v=
null!==d&&""!==d;"number"==typeof r[t]&&(v&=l);v&&n.push(d);if(null!==r[t]&&void 0!==r[t]){var u=(new a(r[t])).replaceAll(d,m).s;n.push(u)}else n.push("");v&&n.push(d);h&&n.push(h)}n.length-=1;return new a(n.join(""))},toString:function(){return this.s},underscore:function(){var b=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();(new a(this.s.charAt(0))).isUpper()&&(b="_"+b);return new a(b)},unescapeHTML:function(){return new a(this.s.replace(/\&([^;]+);/g,
function(a,b){var h;return b in w?w[b]:(h=b.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(h[1],16)):(h=b.match(/^#(\d+)$/))?String.fromCharCode(~~h[1]):a}))},valueOf:function(){return this.s.valueOf()}},n=[],z=function(){var a;a=[];if(Object.getOwnPropertyNames)a=Object.getOwnPropertyNames(m),a.splice(a.indexOf("valueOf"),1),a.splice(a.indexOf("toString"),1);else{var b={},h;for(h in String.prototype)b[h]=h;for(h in Object.prototype)delete b[h];for(h in b)a.push(h)}b={};for(h=0;h<a.length;++h){var d=
a[h],l=m[d];try{var n=typeof l.apply("teststring",[]);b[d]=n}catch(r){}}return b}(),u;for(u in z)(function(b){var e=m[b];"function"==typeof e&&(r[b]||(r[b]="string"===z[b]?function(){return new a(e.apply(this,arguments))}:e))})(u);r.repeat=r.times;r.include=r.contains;r.toInteger=r.toInt;r.toBool=r.toBoolean;r.decodeHTMLEntities=r.decodeHtmlEntities;b.extendPrototype=function(){for(var a in r)(function(a){var b=r[a];m.hasOwnProperty(a)||(n.push(a),m[a]=function(){String.prototype.s=this;return b.apply(this,
arguments)})})(a)};b.restorePrototype=function(){for(var a=0;a<n.length;++a)delete String.prototype[n[a]];n.length=0};b.VERSION="1.5.0";b.TMPL_OPEN="{{";b.TMPL_CLOSE="}}";b.ENTITIES=d;"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=b:"function"===typeof define&&define.amd?define([],function(){return b}):window.S=b;var w={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},y={},h;for(h in w)y[w[h]]=h;d={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,
"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,
"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,
"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,
"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this);(function(){this.H={Check:{},TennisScoreKeeper:{}}}).call(this);(function(a){function b(b){return b===a||null===b}function l(a){this.isBetweenInclusive=function(b,d){return a>=b&&a<=d};this.isBetweenExclusive=function(b,d){return a>b&&a<d}}function d(a,b){var l=typeof a,z=typeof b;if(null===a&&null===b)return!0;if(l!==z)return!1;if("object"!==l&&"object"!==z)return a==b;var l=!0,u;for(u in a)if("function"!==typeof a[u]&&(l=l&&d(a[u],b[u]),!l))return!1;return!0}this.notEmpty=function(b,d){if(b===a||null===b)throw Error("Parameter '"+d+"' cannot be null or undefined");
};this.condition=function(a,b){if(!a)throw Error(b||"An error occured");};this.isEmpty=b;this.isNotEmpty=function(a){return!b(a)};this.areSame=d;this.value=function(a){return new l(a)}}).call(this.H.Check);(function(a,b,l){function d(b,c,e){a.condition("15b6d1fc81a043c081242617308b4fdc"===e,"GameTieMode must not be instantiated. Use TieMode enum.");a.notEmpty(b,"id");a.notEmpty(c,"pointByDifferenceFunc");a.condition("function"===typeof c,"pointByDifferenceFunc must be a function returning tennisPoint via point difference");this.PointByDifference=function(a){return c.call(null,a)};this.id=b}function m(b){a.notEmpty(b,"label");this.label=b;this.id=n(b)}function r(b,c,e,d){a.condition("82ee546ae51f4a77a048186fa13e98f1"===
d,"PointType must not be instantiated. Use PointTypes enum.");a.notEmpty(c,"label");a.notEmpty(e,"shotStyle");a.condition(b===y.PointWinner||b===y.PointLoser,"Point credit goes to winner or loser. Use pointCreditTypes enum");this.label=c;this.creditTo=b;this.shotStyle=e;this.id=n(c)}function n(a){return b(a).trim().replaceAll(" ","").replaceAll("/","").s}var z={Love:{id:"Love",code:"0"},Fifteen:{id:"Fifteen",code:"15"},Thirty:{id:"Thirty",code:"30"},Fourty:{id:"Fourty",code:"40"},Advantage:{id:"Advantage",
code:"Ad"}},u={advantageWin:new d("AdvantageWin",function(b){a.condition(a.value(b).isBetweenInclusive(-1,1),"Something is wrong, point difference must be [-1,1]");return a.value(b).isBetweenInclusive(-1,0)?z.Fourty:1===b?z.Advantage:z.Love},"15b6d1fc81a043c081242617308b4fdc"),singlePointWin:new d("SinglePointWin",function(b){a.condition(a.value(b).isBetweenInclusive(-1,1),"Something is wrong, point difference must be [-1,1]");return 0===b?z.Fourty:z.Love},"15b6d1fc81a043c081242617308b4fdc")},w={tiebreak:{id:"TieBreak",
minimumGamePoints:7},superTiebreak:{id:"SuperTieBreak",minimumGamePoints:10},gameDifference:{id:"GameDifference",minimumGamePoints:4}};l={NormalPassing:new m("Normal/Passing"),Volley:new m("Volley"),Smash:new m("Smash"),Lob:new m("Lob"),Drop:new m("Drop")};var y={PointWinner:0,PointLoser:1};this.Model={Player:function(b){a.notEmpty(b,"name");var c=this;this.name=b;this.id=n(b);this.setName=function(a){c.name=a;c.id=n(a)}},MatchDefinition:function(b,c,e){a.notEmpty(b,"playerOne");a.notEmpty(c,"playerTwo");
this.players=[b,c];this.gamesPerSet=6;this.setsCount=3;this.gameTieMode=u.advantageWin;this.lastSetTieMode=w.tiebreak;this.startingPlayer=e?c:b},TieMode:u,LastSetTieMode:w,Point:function(b,c,e,d){a.notEmpty(b,"forPlayer");a.notEmpty(c,"creditedTo");a.notEmpty(e,"type");this.player=b;this.creditedTo=c;this.timestamp=new Date;this.type=e;this.isOnSecondServe=d},ShotStyles:l,PointCreditTypes:y,PointTypes:{WinningShot:function(a){return new r(y.PointWinner,"Winning Shot",a,"82ee546ae51f4a77a048186fa13e98f1")},
ForcedError:function(a){return new r(y.PointWinner,"Forced Error",a,"82ee546ae51f4a77a048186fa13e98f1")},UnforcedError:function(a){return new r(y.PointLoser,"Unforced Error",a,"82ee546ae51f4a77a048186fa13e98f1")},Ace:function(a){return new r(y.PointWinner,"Ace",a,"82ee546ae51f4a77a048186fa13e98f1")},DoubleFault:function(a){return new r(y.PointLoser,"Double Fault",a,"82ee546ae51f4a77a048186fa13e98f1")}},PointType:r,TennisPoints:z}}).call(this.H.TennisScoreKeeper,this.H.Check,this.S);(function(a,b,l){function d(d){a.notEmpty(d,"player");this.Player=d;this.Game=b.TennisPoints.Love;this.Sets=this.Games=this.GamePoints=0}function m(b,d,l,m){a.notEmpty(b,"playerOneScoreProjection");a.notEmpty(d,"playerTwoScoreProjection");a.notEmpty(l,"setsPerMatch");a.notEmpty(m,"servingPlayer");var r=this,h=Math.ceil(l/2);this.PlayerOne=b;this.PlayerTwo=d;this.Winner=function(){return b.Sets===h?b:d.Sets===h?d:null};this.IsWon=function(){return null!==r.Winner()};this.ServingPlayer=function(){return m}}
var r=[b.TennisPoints.Love,b.TennisPoints.Fifteen,b.TennisPoints.Thirty,b.TennisPoints.Fourty];this.ScoreProjector=function(n,z){function u(b){a.notEmpty(b,"points");var c=new d(n.players[0]),e=new d(n.players[1]);x=n.startingPlayer;aa=b;for(var h=0;h<b.length;h++){var l=b[h];T=l;l.player===c.Player?w(c,e):w(e,c)}b=new m(c,e,n.setsCount,x);b.IsWon()&&p("raiseOnMatchWon",[new s(c,e,"22eb1d7990b640aab2c47aa9ba18572f")]);return b}function w(d,l){d.GamePoints++;p("raiseOnPointWon",[new s(d,l,"22eb1d7990b640aab2c47aa9ba18572f")]);
if(e(d,l))Ba=x,0!==(d.GamePoints+l.GamePoints)%2&&(h(),p("raiseOnServeChange",[new s(d,l,"22eb1d7990b640aab2c47aa9ba18572f")])),2<=d.GamePoints-l.GamePoints&&d.GamePoints>=(d.Sets!==l.Sets||d.Sets!==Math.floor(n.setsCount/2)?7:n.lastSetTieMode.minimumGamePoints)&&(x=Ba===d.Player?l.Player:d.Player,y(d,l),c(d,l));else if(3>=d.GamePoints)d.Game=r[d.GamePoints];else if(a.value(d.GamePoints-l.GamePoints).isBetweenInclusive(-1,1)){var m=d.GamePoints-l.GamePoints;d.Game=n.gameTieMode.PointByDifference(m);
l.Game=n.gameTieMode.PointByDifference(-m);0<m&&(d.Game==b.TennisPoints.Love&&l.Game==b.TennisPoints.Love)&&y(d,l)}else y(d,l)}function y(a,e){p("raiseOnGameWon",[new s(a,e,"22eb1d7990b640aab2c47aa9ba18572f")]);a.Game=b.TennisPoints.Love;e.Game=b.TennisPoints.Love;a.GamePoints=0;e.GamePoints=0;a.Games++;h();p("raiseOnServeChange",[new s(a,e,"22eb1d7990b640aab2c47aa9ba18572f")]);2<=a.Games-e.Games&&a.Games>=n.gamesPerSet&&c(a,e)}function h(){x=x===n.players[0]?n.players[1]:n.players[0]}function c(a,
b){p("raiseOnSetWon",[new s(a,b,"22eb1d7990b640aab2c47aa9ba18572f")]);a.Games=0;b.Games=0;a.Sets++}function e(a,c){var e=a.Games===n.gamesPerSet&&c.Games===n.gamesPerSet;return a.Sets!==c.Sets||a.Sets!==Math.floor(n.setsCount/2)?e:e&&n.lastSetTieMode!==b.LastSetTieMode.gameDifference}function p(a,b){z&&z[a].apply(l,b)}function s(b,c,d){a.condition("22eb1d7990b640aab2c47aa9ba18572f"===d,"HookArgs must not be instantiated. They are exposed for intellisense");this.WinningPlayer=b.Player;this.WinningGamePoints=
b.GamePoints;this.LosingPlayer=c.Player;this.LosingGamePoints=c.GamePoints;this.ServingPlayer=x;this.IsTiebreak=e(b,c);this.DecidingPoint=T;this.AllPoints=aa}a.notEmpty(n,"gameDefinition");var x=n.startingPlayer,Ba=null,T=null,aa=[];this.processPoints=this.toTennisScore=u;this.HookArgs=s};this.ScoreProjectorHooks=function(a,b,d,m,r){function h(a,b){"function"===typeof a&&a.apply(l,b)}var c=this;this.onPointWon=a;this.onGameWon=b;this.onSetWon=d;this.onMatchWon=m;this.onServeChange=r;this.raiseOnPointWon=
function(){h(c.onPointWon,arguments)};this.raiseOnGameWon=function(){h(c.onGameWon,arguments)};this.raiseOnSetWon=function(){h(c.onSetWon,arguments)};this.raiseOnMatchWon=function(){h(c.onMatchWon,arguments)};this.raiseOnServeChange=function(){h(c.onServeChange,arguments)}}}).call(this.H.TennisScoreKeeper,this.H.Check,this.H.TennisScoreKeeper.Model);(function(a,b,l){function d(){var a=this;this.Points=[];this.Games=[];this.Sets=[];this.SetsScore=0;this.Score=function(){return a.SetsScore};this.SetScore=function(){return 0===a.Sets.length?0:a.Sets[a.Sets.length-1].Score()};this.GameScore=function(){return 0===a.Games.length?0:a.Games[a.Games.length-1].Score()}}function m(){var a=this;this.Games=[];this.TiebreakGame=l;this.IsWon=!1;this.Score=function(){return a.Games.length}}function r(){var a=this;this.Points=[];this.Score=function(){return a.Points.length}}
function n(a,b,l){var h=this;this.PlayerOne={Player:a,Score:new d};this.PlayerTwo={Player:b,Score:new d};this.ServingPlayer=l;this.forPlayer=function(a){return h.PlayerOne.Player===a?h.PlayerOne:h.PlayerTwo};this.forOpponent=function(a){return h.PlayerOne.Player===a?h.PlayerTwo:h.PlayerOne}}var z=this;this.DetailedScoreProjector=function(b){a.notEmpty(b,"gameDefinition");var d=new n(b.players[0],b.players[1],b.startingPlayer),l=new z.ScoreProjector(b,new z.ScoreProjectorHooks(function(a){var b=d.forPlayer(a.WinningPlayer).Score;
b.Points.push(a.DecidingPoint);0===b.Games.length&&b.Games.push(new r);b.Games[b.Games.length-1].Points.push(a.DecidingPoint)},function(a){var b=d.forPlayer(a.WinningPlayer).Score,e=d.forPlayer(a.LosingPlayer).Score;0===b.Sets.length&&b.Sets.push(new m);b.Sets[b.Sets.length-1].Games.push(b.Games[b.Games.length-1]);a.IsTiebreak&&(b.Sets[b.Sets.length-1].TiebreakGame=b.Games[b.Games.length-1],e.Sets[e.Sets.length-1].TiebreakGame=e.Games[e.Games.length-1]);b.Games.push(new r);e.Games.push(new r)},function(a){var b=
d.forPlayer(a.WinningPlayer).Score;b.SetsScore++;b.Sets[b.Sets.length-1].IsWon=!0;b.Sets.push(new m);d.forPlayer(a.LosingPlayer).Score.Sets.push(new m)},function(a){d.forPlayer(a.WinningPlayer).Score.Sets.pop();d.forPlayer(a.LosingPlayer).Score.Sets.pop()},function(a){d.ServingPlayer=a.ServingPlayer}));this.projectScore=function(a){d=new n(b.players[0],b.players[1],b.startingPlayer);l.processPoints(a);return d}}}).call(this.H.TennisScoreKeeper,this.H.Check,this.H.TennisScoreKeeper.Model);(function(a,b,l){function d(d){a.notEmpty(d,"players");a.condition(2===d.length,"The match must have exactly two players");this.pointFor=function(a,l,m){var w=a===d[0]?d[1]:d[0];return new b.Point(a,l.creditTo===b.PointCreditTypes.PointWinner?a:w,l,!0===m?!0:!1)}}var m=this;this.Engine=function(b){a.notEmpty(b,"gameDefinition");var l=[],z=new d(b.players),u=[],w=new m.ScoreProjector(b),u=[b.players[0],b.players[1]];this.scorePointFor=function(a,b,c){a=z.pointFor(a,b,c);l.push(a)};this.undoLatestPoint=
function(){0!==l.length&&l.pop()};this.players=u;this.points=l;this.tennisScore=function(){return w.toTennisScore(l)}};this.PointFactory=d}).call(this.H.TennisScoreKeeper,this.H.Check,this.H.TennisScoreKeeper.Model,this._);