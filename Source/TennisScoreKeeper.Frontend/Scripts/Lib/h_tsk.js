var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,b){var m=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(m=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,m)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,m){a=a.split(".");m=m||goog.global;a[0]in m||!m.execScript||m.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&goog.isDef(b)?m[e]=b:m=m[e]?m[e]:m[e]={}};goog.getObjectByName=function(a,b){for(var m=a.split("."),e=b||goog.global,l;l=m.shift();)if(goog.isDefAndNotNull(e[l]))e=e[l];else return null;return e};
goog.globalize=function(a,b){var m=b||goog.global,e;for(e in a)m[e]=a[e]};goog.addDependency=function(a,b,m){if(!COMPILED){var e;a=a.replace(/\\/g,"/");for(var l=goog.dependencies_,q=0;e=b[q];q++)l.nameToPath[e]=a,a in l.pathToNames||(l.pathToNames[a]={}),l.pathToNames[a][e]=!0;for(e=0;b=m[e];e++)a in l.requires||(l.requires[a]={}),l.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var m=a[b].src,e=m.lastIndexOf("?"),e=
-1==e?m.length:e;if("base.js"==m.substr(e-7,7)){goog.basePath=m.substr(0,e-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(l){if(!(l in e.written)){if(!(l in e.visited)&&(e.visited[l]=!0,l in e.requires))for(var p in e.requires[l])if(!goog.isProvided_(p))if(p in e.nameToPath)a(e.nameToPath[p]);else throw Error("Undefined nameToPath for "+p);l in m||(m[l]=!0,b.push(l))}}var b=[],m={},e=goog.dependencies_,l;for(l in goog.included_)e.written[l]||a(l);for(l=0;l<b.length;l++)if(b[l])goog.importScript_(goog.basePath+b[l]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var m=Object.prototype.toString.call(a);if("[object Window]"==m)return"object";if("[object Array]"==m||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==m||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},m;for(m in a)b[m]=goog.cloneObject(a[m]);return b}return a};goog.bindNative_=function(a,b,m){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,m){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(l,e);return a.apply(b,l)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,m){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var m=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,m);return a.apply(this,b)}};goog.mixin=function(a,b){for(var m in b)a[m]=b[m]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,m=b.createElement("script");m.type="text/javascript";m.defer=!1;m.appendChild(b.createTextNode(a));b.body.appendChild(m);
b.body.removeChild(m)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var m=function(a){return goog.cssNameMapping_[a]||a},e=function(a){a=a.split("-");for(var b=[],p=0;p<a.length;p++)b.push(m(a[p]));return b.join("-")},e=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?m:e:function(a){return a};return b?a+"-"+e(b):e(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var m=b||{},e;for(e in m){var l=(""+m[e]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+e+"\\}","gi"),l)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,m){goog.exportPath_(a,b,m)};goog.exportProperty=function(a,b,m){a[b]=m};
goog.inherits=function(a,b){function m(){}m.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new m;a.prototype.constructor=a};
goog.base=function(a,b,m){var e=arguments.callee.caller;if(goog.DEBUG&&!e)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(e.superClass_)return e.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var l=Array.prototype.slice.call(arguments,2),q=!1,p=a.constructor;p;p=p.superClass_&&p.superClass_.constructor)if(p.prototype[b]===e)q=!0;else if(q)return p.prototype[b].apply(a,
l);if(a[b]===e)return a.constructor.prototype[b].apply(a,l);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};/*

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(a){function b(a,d,c){c=(c||0)-1;for(var b=a.length;++c<b;)if(a[c]===d)return c;return-1}function m(a,d){var c=typeof d;a=a.cache;if("boolean"==c||null==d)return a[d];"number"!=c&&"string"!=c&&(c="object");var h="number"==c?d:ba+d;a=a[c]||(a[c]={});return"object"==c?a[h]&&-1<b(a[h],d)?0:-1:a[h]?0:-1}function e(a){var d=this.cache,c=typeof a;if("boolean"==c||null==a)d[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var b="number"==c?a:ba+a,h=d[c]||(d[c]={});"object"==c?(h[b]||(h[b]=[])).push(a)==
this.array.length&&(d[c]=!1):h[b]=!0}}function l(a){return a.charCodeAt(0)}function q(a,c){var b=a.index,h=c.index;a=a.criteria;c=c.criteria;if(a!==c){if(a>c||"undefined"==typeof a)return 1;if(a<c||"undefined"==typeof c)return-1}return b<h?-1:1}function p(a){var c=-1,b=a.length,h=B();h["false"]=h["null"]=h["true"]=h.undefined=!1;var k=B();k.array=a;k.cache=h;for(k.push=e;++c<b;)k.push(a[c]);return!1===h.object?(t(k),null):k}function E(a){return"\\"+Da[a]}function x(){return s.pop()||[]}function B(){return y.pop()||
{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function w(a){a.length=0;s.length<u&&s.push(a)}function t(a){var c=a.cache;c&&t(c);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;y.length<u&&y.push(a)}function c(a,c,b){c||(c=0);"undefined"==typeof b&&(b=a?a.length:0);var h=-1;b=b-c||0;for(var k=Array(0>b?0:b);++h<b;)k[h]=a[c+h];return k}function h(e){function d(a){return a&&
"object"==typeof a&&!O(a)&&H.call(a,"__wrapped__")?a:new s(a)}function s(a){this.__wrapped__=a}function u(a,f,g,n){function r(){var n=arguments,k=d?this:f;c||(a=f[b]);g.length&&(n=n.length?(n=G.call(n),h?n.concat(g):g.concat(n)):g);return this instanceof r?(k=Q(a.prototype)?qa(a.prototype):{},n=a.apply(k,n),Q(n)?n:k):a.apply(k,n)}var c=W(a),d=!g,b=f;if(d){var h=n;g=f}else if(!c){if(!n)throw new wb;f=a}return r}function y(a){return Za[a]}function N(a,f,g){var n=(n=d.indexOf)===$a?b:n;return n}function aa(a){return function(f,
g,n,r){"boolean"!=typeof g&&null!=g&&(n=(r=n)&&r[g]===f?k:g,g=!1);null!=n&&(n=d.createCallback(n,r));return a(f,g,n,r)}}function Da(a){var f,g;if(!a||I.call(a)!=X||(f=a.constructor,W(f)&&!(f instanceof f)))return!1;$(a,function(f,a){g=a});return g===k||H.call(a,g)}function xb(a){return yb[a]}function Fa(a,f,g,n,r,A){var z=a;"boolean"!=typeof f&&null!=f&&(n=g,g=f,f=!1);if("function"==typeof g){g="undefined"==typeof n?g:d.createCallback(g,n,1);z=g(z);if("undefined"!=typeof z)return z;z=a}if(n=Q(z)){var b=
I.call(z);if(!R[b])return z;var h=O(z)}if(!n||!f)return n?h?c(z):Ga({},z):z;n=U[b];switch(b){case ga:case ha:return new n(+z);case ia:case ca:return new n(z);case ja:return n(z.source,zb.exec(z))}b=!r;r||(r=x());A||(A=x());for(var Ea=r.length;Ea--;)if(r[Ea]==a)return A[Ea];z=h?n(z.length):{};h&&(H.call(a,"index")&&(z.index=a.index),H.call(a,"input")&&(z.input=a.input));r.push(a);A.push(z);(h?D:F)(a,function(a,n){z[n]=Fa(a,f,g,k,r,A)});b&&(w(r),w(A));return z}function ra(a){var f=[];$(a,function(a,
n){W(a)&&f.push(n)});return f.sort()}function ab(a){for(var f=-1,g=P(a),n=g.length,r={};++f<n;){var c=g[f];r[a[c]]=c}return r}function da(a,f,g,n,r,c){var b=g===C;if("function"==typeof g&&!b){g=d.createCallback(g,n,2);var h=g(a,f);if("undefined"!=typeof h)return!!h}if(a===f)return 0!==a||1/a==1/f;var L=typeof a,k=typeof f;if(a===a&&(!a||"function"!=L&&"object"!=L)&&(!f||"function"!=k&&"object"!=k))return!1;if(null==a||null==f)return a===f;k=I.call(a);L=I.call(f);k==ka&&(k=X);L==ka&&(L=X);if(k!=L)return!1;
switch(k){case ga:case ha:return+a==+f;case ia:return a!=+a?f!=+f:0==a?1/a==1/f:a==+f;case ja:case ca:return a==V(f)}L=k==sa;if(!L){if(H.call(a,"__wrapped__ ")||H.call(f,"__wrapped__"))return da(a.__wrapped__||a,f.__wrapped__||f,g,n,r,c);if(k!=X)return!1;var k=a.constructor,e=f.constructor;if(k!=e&&!(W(k)&&k instanceof k&&W(e)&&e instanceof e))return!1}e=!r;r||(r=x());c||(c=x());for(k=r.length;k--;)if(r[k]==a)return c[k]==f;var l=0,h=!0;r.push(a);c.push(f);if(L){k=a.length;l=f.length;h=l==a.length;
if(!h&&!b)return h;for(;l--;)if(L=k,e=f[l],b)for(;L--&&!(h=da(a[L],e,g,n,r,c)););else if(!(h=da(a[l],e,g,n,r,c)))break;return h}$(f,function(f,d,b){if(H.call(b,d))return l++,h=H.call(a,d)&&da(a[d],f,g,n,r,c)});h&&!b&&$(a,function(f,a,g){if(H.call(g,a))return h=-1<--l});e&&(w(r),w(c));return h}function W(a){return"function"==typeof a}function Q(a){return!(!a||!M[typeof a])}function bb(a){return"number"==typeof a||I.call(a)==ia}function la(a){return"string"==typeof a||I.call(a)==ca}function cb(a,f,
g){var n=arguments,c=0,A=2;if(!Q(a))return a;if(g===C)var b=n[3],h=n[4],k=n[5];else{var e=!0,h=x(),k=x();"number"!=typeof g&&(A=n.length);3<A&&"function"==typeof n[A-2]?b=d.createCallback(n[--A-1],n[A--],2):2<A&&"function"==typeof n[A-1]&&(b=n[--A])}for(;++c<A;)(O(n[c])?D:F)(n[c],function(f,g){var n,c,r=f,d=a[g];if(f&&((c=O(f))||Ha(f))){for(r=h.length;r--;)if(n=h[r]==f){d=k[r];break}if(!n){var A;b&&(r=b(d,f),A="undefined"!=typeof r)&&(d=r);A||(d=c?O(d)?d:[]:Ha(d)?d:{});h.push(f);k.push(d);A||(d=cb(d,
f,C,b,h,k))}}else b&&(r=b(d,f),"undefined"==typeof r&&(r=f)),"undefined"!=typeof r&&(d=r);a[g]=d});e&&(w(h),w(k));return a}function Ia(a){for(var f=-1,g=P(a),n=g.length,c=J(n);++f<n;)c[f]=a[g[f]];return c}function db(a,f,g){var n=-1,c=N(),d=a?a.length:0,b=!1;g=(0>g?S(0,d+g):g)||0;d&&"number"==typeof d?b=-1<(la(a)?a.indexOf(f,g):c(a,f,g)):F(a,function(a){if(++n>=g)return!(b=a===f)});return b}function eb(a,f,g){var n=!0;f=d.createCallback(f,g);g=-1;var c=a?a.length:0;if("number"==typeof c)for(;++g<
c&&(n=!!f(a[g],g,a)););else F(a,function(a,g,c){return n=!!f(a,g,c)});return n}function ta(a,f,g){var n=[];f=d.createCallback(f,g);g=-1;var c=a?a.length:0;if("number"==typeof c)for(;++g<c;){var b=a[g];f(b,g,a)&&n.push(b)}else F(a,function(a,g,c){f(a,g,c)&&n.push(a)});return n}function Ja(a,f,g){f=d.createCallback(f,g);g=-1;var n=a?a.length:0;if("number"==typeof n)for(;++g<n;){var c=a[g];if(f(c,g,a))return c}else{var b;F(a,function(a,g,n){if(f(a,g,n))return b=a,!1});return b}}function D(a,f,g){var n=
-1,c=a?a.length:0;f=f&&"undefined"==typeof g?f:d.createCallback(f,g);if("number"==typeof c)for(;++n<c&&!1!==f(a[n],n,a););else F(a,f);return a}function Ka(a,f,g){var n=-1,c=a?a.length:0;f=d.createCallback(f,g);if("number"==typeof c)for(var b=J(c);++n<c;)b[n]=f(a[n],n,a);else b=[],F(a,function(a,g,c){b[++n]=f(a,g,c)});return b}function fb(a,f,g){var n=-Infinity,c=n;if(!f&&O(a)){g=-1;for(var b=a.length;++g<b;){var h=a[g];h>c&&(c=h)}}else f=!f&&la(a)?l:d.createCallback(f,g),D(a,function(a,g,d){g=f(a,
g,d);g>n&&(n=g,c=a)});return c}function La(a,f){var g=-1,n=a?a.length:0;if("number"==typeof n)for(var c=J(n);++g<n;)c[g]=a[g][f];return c||Ka(a,f)}function Ma(a,f,g,n){if(!a)return g;var c=3>arguments.length;f=d.createCallback(f,n,4);var b=-1,h=a.length;if("number"==typeof h)for(c&&(g=a[++b]);++b<h;)g=f(g,a[b],b,a);else F(a,function(a,n,d){g=c?(c=!1,a):f(g,a,n,d)});return g}function gb(a,f,g,n){var c=a?a.length:0,b=3>arguments.length;if("number"!=typeof c)var h=P(a),c=h.length;f=d.createCallback(f,
n,4);D(a,function(n,d,k){d=h?h[--c]:--c;g=b?(b=!1,a[d]):f(g,a[d],d,k)});return g}function hb(a,f,g){var c;f=d.createCallback(f,g);g=-1;var r=a?a.length:0;if("number"==typeof r)for(;++g<r&&!(c=f(a[g],g,a)););else F(a,function(a,g,d){return!(c=f(a,g,d))});return!!c}function ib(a){var f=-1,g=N(),c=a?a.length:0,d=ea.apply(K,G.call(arguments,1)),h=[],k=c>=v&&g===b;if(k){var e=p(d);e?(g=m,d=e):k=!1}for(;++f<c;)e=a[f],0>g(d,e)&&h.push(e);k&&t(d);return h}function Na(a,f,g){if(a){var n=0,r=a.length;if("number"!=
typeof f&&null!=f){var b=-1;for(f=d.createCallback(f,g);++b<r&&f(a[b],b,a);)n++}else if(n=f,null==n||g)return a[0];return c(a,0,ua(S(0,n),r))}}function $a(a,f,g){if("number"==typeof g){var c=a?a.length:0;g=0>g?S(0,c+g):g||0}else if(g)return g=jb(a,f),a[g]===f?g:-1;return a?b(a,f,g):-1}function Oa(a,f,g){if("number"!=typeof f&&null!=f){var n=0,r=-1,b=a?a.length:0;for(f=d.createCallback(f,g);++r<b&&f(a[r],r,a);)n++}else n=null==f||g?1:S(0,f);return c(a,n)}function jb(a,f,g,c){var r=0,b=a?a.length:r;
g=g?d.createCallback(g,c,1):Pa;for(f=g(f);r<b;)c=r+b>>>1,g(a[c])<f?r=c+1:b=c;return r}function kb(a){for(var f=-1,g=a?fb(La(a,"length")):0,c=J(0>g?0:g);++f<g;)c[f]=La(a,f);return c}function lb(a,f){for(var g=-1,c=a?a.length:0,d={};++g<c;){var b=a[g];f?d[b]=f[g]:d[b[0]]=b[1]}return d}function Qa(a,f){return mb.fastBind||Y&&2<arguments.length?Y.call.apply(Y,arguments):u(a,f,G.call(arguments,2))}function nb(a,f,g){function c(){va(v);va(s);l=0;v=s=null}function d(){var f=t&&(!u||1<l);c();f&&(!1!==p&&
(m=new wa),k=a.apply(e,h))}function b(){c();if(t||p!==f)m=new wa,k=a.apply(e,h)}var h,k,e,l=0,m=0,p=!1,v=null,s=null,t=!0;f=S(0,f||0);if(!0===g)var u=!0,t=!1;else Q(g)&&(u=g.leading,p="maxWait"in g&&S(f,g.maxWait||0),t="trailing"in g?g.trailing:t);return function(){h=arguments;e=this;l++;va(s);if(!1===p)u&&2>l&&(k=a.apply(e,h));else{var g=new wa;v||u||(m=g);var c=p-(g-m);0>=c?(va(v),v=null,m=g,k=a.apply(e,h)):v||(v=xa(b,c))}f!==p&&(s=xa(d,f));return k}}function ob(a){var f=G.call(arguments,1);return xa(function(){a.apply(k,
f)},1)}function Pa(a){return a}function pb(a){D(ra(a),function(f){var g=d[f]=a[f];d.prototype[f]=function(){var a=this.__wrapped__,f=[a];ya.apply(f,arguments);f=g.apply(d,f);return a&&"object"==typeof a&&a===f?this:new s(f)}})}function qb(){return this.__wrapped__}e=e?Z.defaults(a.Object(),e,Z.pick(a,Ab)):a;var J=e.Array,ma=e.Boolean,wa=e.Date,Ra=e.Function,T=e.Math,Bb=e.Number,na=e.Object,Sa=e.RegExp,V=e.String,wb=e.TypeError,K=[],Ta=na.prototype,Cb=e._,fa=Sa("^"+V(Ta.valueOf).replace(/[.*+?^${}()|[\]\\]/g,
"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Db=T.ceil,va=e.clearTimeout,ea=K.concat,rb=T.floor,Eb=Ra.prototype.toString,oa=fa.test(oa=na.getPrototypeOf)&&oa,H=Ta.hasOwnProperty,ya=K.push,za=e.setImmediate,xa=e.setTimeout,I=Ta.toString,Y=fa.test(Y=I.bind)&&Y,qa=fa.test(qa=na.create)&&qa,Ua=fa.test(Ua=J.isArray)&&Ua,Fb=e.isFinite,Gb=e.isNaN,Aa=fa.test(Aa=na.keys)&&Aa,S=T.max,ua=T.min,Va=e.parseInt,sb=T.random,G=K.slice,T=fa.test(e.attachEvent),T=Y&&!/\n|true/.test(Y+T),U={};U[sa]=J;U[ga]=ma;U[ha]=
wa;U[tb]=Ra;U[X]=na;U[ia]=Bb;U[ja]=Sa;U[ca]=V;s.prototype=d.prototype;var mb=d.support={};mb.fastBind=Y&&!T;d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ub,variable:"",imports:{_:d}};var O=Ua,ma=function(a){var f,g=[];if(!a||!M[typeof a])return g;for(f in a)H.call(a,f)&&g.push(f);return g},P=Aa?function(a){return Q(a)?Aa(a):[]}:ma,Za={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yb=ab(Za),Ga=function(a,f,g){var c,b=a,h=b;if(!b)return h;var k=
arguments,e=0,l="number"==typeof g?2:k.length;if(3<l&&"function"==typeof k[l-2])var p=d.createCallback(k[--l-1],k[l--],2);else 2<l&&"function"==typeof k[l-1]&&(p=k[--l]);for(;++e<l;)if((b=k[e])&&M[typeof b])for(var m=-1,v=M[typeof b]&&P(b),s=v?v.length:0;++m<s;)c=v[m],h[c]=p?p(h[c],b[c]):b[c];return h},Wa=function(a,f,g){var c,d=a,b=d;if(!d)return b;for(var h=arguments,k=0,e="number"==typeof g?2:h.length;++k<e;)if((d=h[k])&&M[typeof d])for(var l=-1,p=M[typeof d]&&P(d),m=p?p.length:0;++l<m;)c=p[l],
"undefined"==typeof b[c]&&(b[c]=d[c]);return b},$=function(a,f,g){var c;if(!a||!M[typeof a])return a;f=f&&"undefined"==typeof g?f:d.createCallback(f,g);for(c in a)if(!1===f(a[c],c,a))break;return a},F=function(a,f,g){if(!a||!M[typeof a])return a;f=f&&"undefined"==typeof g?f:d.createCallback(f,g);for(var c=-1,b=M[typeof a]&&P(a),h=b?b.length:0;++c<h&&(g=b[c],!1!==f(a[g],g,a)););return a},Ha=function(a){if(!a||I.call(a)!=X)return!1;var f=a.valueOf,g="function"==typeof f&&(g=oa(f))&&oa(g);return g?a==
g||oa(a)==g:Da(a)},ma=aa(function f(a,c,d){for(var b=-1,h=a?a.length:0,k=[];++b<h;){var e=a[b];d&&(e=d(e,b,a));O(e)?ya.apply(k,c?e:f(e)):k.push(e)}return k}),Xa=aa(function(a,g,c){var d=-1,h=N(),k=a?a.length:0,e=[],l=!g&&k>=v&&h===b,s=c||l?x():e;if(l){var u=p(s);u?(h=m,s=u):(l=!1,s=c?s:(w(s),e))}for(;++d<k;){var u=a[d],q=c?c(u,d,a):u;if(g?!d||s[s.length-1]!==q:0>h(s,q))(c||l)&&s.push(q),e.push(u)}l?(w(s.array),t(s)):c&&w(s);return e});T&&(Ya&&"function"==typeof za)&&(ob=Qa(za,e));za=8==Va(vb+"08")?
Va:function(a,g){return Va(la(a)?a.replace(Hb,""):a,g||0)};d.after=function(a,g){return 1>a?g():function(){if(1>--a)return g.apply(this,arguments)}};d.assign=Ga;d.at=function(a){for(var g=-1,c=ea.apply(K,G.call(arguments,1)),d=c.length,b=J(d);++g<d;)b[g]=a[c[g]];return b};d.bind=Qa;d.bindAll=function(a){for(var g=1<arguments.length?ea.apply(K,G.call(arguments,1)):ra(a),c=-1,d=g.length;++c<d;){var b=g[c];a[b]=Qa(a[b],a)}return a};d.bindKey=function(a,g){return u(a,g,G.call(arguments,2),C)};d.compact=
function(a){for(var g=-1,c=a?a.length:0,d=[];++g<c;){var b=a[g];b&&d.push(b)}return d};d.compose=function(){var a=arguments;return function(){for(var g=arguments,c=a.length;c--;)g=[a[c].apply(this,g)];return g[0]}};d.countBy=function(a,g,c){var b={};g=d.createCallback(g,c);D(a,function(a,f,c){f=V(g(a,f,c));H.call(b,f)?b[f]++:b[f]=1});return b};d.createCallback=function(a,c,d){if(null==a)return Pa;var b=typeof a;if("function"!=b){if("object"!=b)return function(c){return c[a]};var h=P(a);return function(c){for(var g=
h.length,d=!1;g--&&(d=da(c[h[g]],a[h[g]],C)););return d}}return"undefined"==typeof c||pa&&!pa.test(Eb.call(a))?a:1===d?function(d){return a.call(c,d)}:2===d?function(d,b){return a.call(c,d,b)}:4===d?function(d,b,n,h){return a.call(c,d,b,n,h)}:function(d,b,n){return a.call(c,d,b,n)}};d.debounce=nb;d.defaults=Wa;d.defer=ob;d.delay=function(a,c){var d=G.call(arguments,2);return xa(function(){a.apply(k,d)},c)};d.difference=ib;d.filter=ta;d.flatten=ma;d.forEach=D;d.forIn=$;d.forOwn=F;d.functions=ra;d.groupBy=
function(a,c,b){var h={};c=d.createCallback(c,b);D(a,function(a,f,d){f=V(c(a,f,d));(H.call(h,f)?h[f]:h[f]=[]).push(a)});return h};d.initial=function(a,g,b){if(!a)return[];var h=0,k=a.length;if("number"!=typeof g&&null!=g){var e=k;for(g=d.createCallback(g,b);e--&&g(a[e],e,a);)h++}else h=null==g||b?1:g||h;return c(a,0,ua(S(0,k-h),k))};d.intersection=function(a){for(var c=arguments,d=c.length,h=-1,k=x(),e=-1,l=N(),s=a?a.length:0,u=[],q=x();++h<d;){var y=c[h];k[h]=l===b&&(y?y.length:0)>=v&&p(h?c[h]:q)}a:for(;++e<
s;){var C=k[0],y=a[e];if(0>(C?m(C,y):l(q,y))){h=d;for((C||q).push(y);--h;)if(C=k[h],0>(C?m(C,y):l(c[h],y)))continue a;u.push(y)}}for(;d--;)(C=k[d])&&t(C);w(k);w(q);return u};d.invert=ab;d.invoke=function(a,c){var d=G.call(arguments,2),b=-1,h="function"==typeof c,k=a?a.length:0,e=J("number"==typeof k?k:0);D(a,function(a){e[++b]=(h?c:a[c]).apply(a,d)});return e};d.keys=P;d.map=Ka;d.max=fb;d.memoize=function(a,c){function d(){var b=d.cache,h=ba+(c?c.apply(this,arguments):arguments[0]);return H.call(b,
h)?b[h]:b[h]=a.apply(this,arguments)}d.cache={};return d};d.merge=cb;d.min=function(a,c,b){var h=Infinity,k=h;if(!c&&O(a)){b=-1;for(var e=a.length;++b<e;){var p=a[b];p<k&&(k=p)}}else c=!c&&la(a)?l:d.createCallback(c,b),D(a,function(a,f,d){f=c(a,f,d);f<h&&(h=f,k=a)});return k};d.omit=function(a,c,b){var h=N(),k="function"==typeof c,e={};if(k)c=d.createCallback(c,b);else var l=ea.apply(K,G.call(arguments,1));$(a,function(a,f,d){if(k?!c(a,f,d):0>h(l,f))e[f]=a});return e};d.once=function(a){var c,d;return function(){if(c)return d;
c=!0;d=a.apply(this,arguments);a=null;return d}};d.pairs=function(a){for(var c=-1,d=P(a),b=d.length,h=J(b);++c<b;){var k=d[c];h[c]=[k,a[k]]}return h};d.partial=function(a){return u(a,G.call(arguments,1))};d.partialRight=function(a){return u(a,G.call(arguments,1),null,C)};d.pick=function(a,c,b){var h={};if("function"!=typeof c)for(var k=-1,e=ea.apply(K,G.call(arguments,1)),l=Q(a)?e.length:0;++k<l;){var p=e[k];p in a&&(h[p]=a[p])}else c=d.createCallback(c,b),$(a,function(a,f,d){c(a,f,d)&&(h[f]=a)});
return h};d.pluck=La;d.range=function(a,c,d){a=+a||0;d=+d||1;null==c&&(c=a,a=0);var b=-1;c=S(0,Db((c-a)/d));for(var h=J(c);++b<c;)h[b]=a,a+=d;return h};d.reject=function(a,c,b){c=d.createCallback(c,b);return ta(a,function(a,f,d){return!c(a,f,d)})};d.rest=Oa;d.shuffle=function(a){var c=-1,d=a?a.length:0,b=J("number"==typeof d?d:0);D(a,function(a){var f=rb(sb()*(++c+1));b[c]=b[f];b[f]=a});return b};d.sortBy=function(a,c,b){var h=-1,k=a?a.length:0,e=J("number"==typeof k?k:0);c=d.createCallback(c,b);
D(a,function(a,f,d){var b=e[++h]=B();b.criteria=c(a,f,d);b.index=h;b.value=a});k=e.length;for(e.sort(q);k--;)a=e[k],e[k]=a.value,t(a);return e};d.tap=function(a,c){c(a);return a};d.throttle=function(a,c,d){var b=!0,h=!0;!1===d?b=!1:Q(d)&&(b="leading"in d?d.leading:b,h="trailing"in d?d.trailing:h);d=B();d.leading=b;d.maxWait=c;d.trailing=h;a=nb(a,c,d);t(d);return a};d.times=function(a,c,b){a=-1<(a=+a)?a:0;var h=-1,k=J(a);for(c=d.createCallback(c,b,1);++h<a;)k[h]=c(h);return k};d.toArray=function(a){return a&&
"number"==typeof a.length?c(a):Ia(a)};d.transform=function(a,c,b,h){var k=O(a);c=d.createCallback(c,h,4);null==b&&(k?b=[]:(h=(h=a&&a.constructor)&&h.prototype,b=Q(h)?qa(h):{}));(k?D:F)(a,function(a,f,d){return c(b,a,f,d)});return b};d.union=function(a){O(a)||(arguments[0]=a?G.call(a):K);return Xa(ea.apply(K,arguments))};d.uniq=Xa;d.unzip=kb;d.values=Ia;d.where=ta;d.without=function(a){return ib(a,G.call(arguments,1))};d.wrap=function(a,c){return function(){var d=[a];ya.apply(d,arguments);return c.apply(this,
d)}};d.zip=function(a){return a?kb(arguments):[]};d.zipObject=lb;d.collect=Ka;d.drop=Oa;d.each=D;d.extend=Ga;d.methods=ra;d.object=lb;d.select=ta;d.tail=Oa;d.unique=Xa;pb(d);d.chain=d;d.prototype.chain=function(){return this};d.clone=Fa;d.cloneDeep=function(a,c,d){return Fa(a,!0,c,d)};d.contains=db;d.escape=function(a){return null==a?"":V(a).replace(Ib,y)};d.every=eb;d.find=Ja;d.findIndex=function(a,c,b){var h=-1,k=a?a.length:0;for(c=d.createCallback(c,b);++h<k;)if(c(a[h],h,a))return h;return-1};
d.findKey=function(a,c,b){var h;c=d.createCallback(c,b);F(a,function(a,d,f){if(c(a,d,f))return h=d,!1});return h};d.has=function(a,c){return a?H.call(a,c):!1};d.identity=Pa;d.indexOf=$a;d.isArguments=function(a){return I.call(a)==ka};d.isArray=O;d.isBoolean=function(a){return!0===a||!1===a||I.call(a)==ga};d.isDate=function(a){return a?"object"==typeof a&&I.call(a)==ha:!1};d.isElement=function(a){return a?1===a.nodeType:!1};d.isEmpty=function(a){var c=!0;if(!a)return c;var d=I.call(a),b=a.length;if(d==
sa||(d==ca||d==ka)||d==X&&"number"==typeof b&&W(a.splice))return!b;F(a,function(){return c=!1});return c};d.isEqual=da;d.isFinite=function(a){return Fb(a)&&!Gb(parseFloat(a))};d.isFunction=W;d.isNaN=function(a){return bb(a)&&a!=+a};d.isNull=function(a){return null===a};d.isNumber=bb;d.isObject=Q;d.isPlainObject=Ha;d.isRegExp=function(a){return a?"object"==typeof a&&I.call(a)==ja:!1};d.isString=la;d.isUndefined=function(a){return"undefined"==typeof a};d.lastIndexOf=function(a,c,d){var b=a?a.length:
0;for("number"==typeof d&&(b=(0>d?S(0,b+d):ua(d,b-1))+1);b--;)if(a[b]===c)return b;return-1};d.mixin=pb;d.noConflict=function(){e._=Cb;return this};d.parseInt=za;d.random=function(a,c){null==a&&null==c&&(c=1);a=+a||0;null==c?(c=a,a=0):c=+c||0;var d=sb();return a%1||c%1?a+ua(d*(c-a+parseFloat("1e-"+((d+"").length-1))),c):a+rb(d*(c-a+1))};d.reduce=Ma;d.reduceRight=gb;d.result=function(a,c){var d=a?a[c]:k;return W(d)?a[c]():d};d.runInContext=h;d.size=function(a){var c=a?a.length:0;return"number"==typeof c?
c:P(a).length};d.some=hb;d.sortedIndex=jb;d.template=function(a,c,b){var h=d.templateSettings;a||(a="");b=Wa({},b,h);var e=Wa({},b.imports,h.imports),h=P(e),e=Ia(e),l,p=0,m=b.interpolate||Ba,s="__p += '",m=Sa((b.escape||Ba).source+"|"+m.source+"|"+(m===ub?Jb:Ba).source+"|"+(b.evaluate||Ba).source+"|$","g");a.replace(m,function(c,d,b,h,g,k){b||(b=h);s+=a.slice(p,k).replace(Kb,E);d&&(s+="' +\n__e("+d+") +\n'");g&&(l=!0,s+="';\n"+g+";\n__p += '");b&&(s+="' +\n((__t = ("+b+")) == null ? '' : __t) +\n'");
p=k+c.length;return c});var s=s+"';\n",v=m=b.variable;v||(m="obj",s="with ("+m+") {\n"+s+"\n}\n");s=(l?s.replace(Lb,""):s).replace(Mb,"$1").replace(Nb,"$1;");s="function("+m+") {\n"+(v?"":m+" || ("+m+" = {});\n")+"var __t, __p = '', __e = _.escape"+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";b="\n/*\n//@ sourceURL="+(b.sourceURL||"/lodash/template/source["+Ob++ +"]")+"\n*/";try{var u=Ra(h,"return "+s+b).apply(k,e)}catch(t){throw t.source=
s,t;}if(c)return u(c);u.source=s;return u};d.unescape=function(a){return null==a?"":V(a).replace(Pb,xb)};d.uniqueId=function(a){var c=++Ca;return V(null==a?"":a)+c};d.all=eb;d.any=hb;d.detect=Ja;d.findWhere=Ja;d.foldl=Ma;d.foldr=gb;d.include=db;d.inject=Ma;F(d,function(a,c){d.prototype[c]||(d.prototype[c]=function(){var c=[this.__wrapped__];ya.apply(c,arguments);return a.apply(d,c)})});d.first=Na;d.last=function(a,b,h){if(a){var k=0,e=a.length;if("number"!=typeof b&&null!=b){var l=e;for(b=d.createCallback(b,
h);l--&&b(a[l],l,a);)k++}else if(k=b,null==k||h)return a[e-1];return c(a,S(0,e-k))}};d.take=Na;d.head=Na;F(d,function(a,c){d.prototype[c]||(d.prototype[c]=function(c,d){var b=a(this.__wrapped__,c,d);return null==c||d&&"function"!=typeof c?b:new s(b)})});d.VERSION="1.3.1";d.prototype.toString=function(){return V(this.__wrapped__)};d.prototype.value=qb;d.prototype.valueOf=qb;D(["join","pop","shift"],function(a){var c=K[a];d.prototype[a]=function(){return c.apply(this.__wrapped__,arguments)}});D(["push",
"reverse","sort","unshift"],function(a){var c=K[a];d.prototype[a]=function(){c.apply(this.__wrapped__,arguments);return this}});D(["concat","slice","splice"],function(a){var c=K[a];d.prototype[a]=function(){return new s(c.apply(this.__wrapped__,arguments))}});return d}var k,s=[],y=[],Ca=0,C={},ba=+new Date+"",v=75,u=40,Lb=/\b__p \+= '';/g,Mb=/\b(__p \+=) '' \+/g,Nb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pb=/&(?:amp|lt|gt|quot|#39);/g,Jb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zb=/\w*$/,ub=/<%=([\s\S]+?)%>/g,pa=
(pa=/\bthis\b/)&&pa.test(h)&&pa,vb=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Hb=RegExp("^["+vb+"]*0+(?=.$)"),Ba=/($^)/,Ib=/[&<>"']/g,Kb=/['\n\r\t\u2028\u2029\\]/g,Ab="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),Ob=0,ka="[object Arguments]",sa="[object Array]",ga="[object Boolean]",ha="[object Date]",tb=
"[object Function]",ia="[object Number]",X="[object Object]",ja="[object RegExp]",ca="[object String]",R={};R[tb]=!1;R[ka]=R[sa]=R[ga]=R[ha]=R[ia]=R[X]=R[ja]=R[ca]=!0;var M={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Da={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},aa=M[typeof exports]&&exports,Ya=M[typeof module]&&module&&module.exports==aa&&module,N=M[typeof global]&&global;!N||N.global!==N&&N.window!==N||(a=N);var Z=h();"function"==
typeof define&&"object"==typeof define.amd&&define.amd?(a._=Z,define(function(){return Z})):aa&&!aa.nodeType?Ya?(Ya.exports=Z)._=Z:aa._=Z:a._=Z})(this);!function(){function a(a){this.s=null!==a&&void 0!==a?"string"===typeof a?a:a.toString():a;this.orig=a;null!==a&&void 0!==a?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=a.length:this.length=-1}function b(c){return new a(c)}function m(a,b){var k=[],e;for(e=0;e<a.length;e++)k.push(a[e]),b&&b.call(a,a[e],e);return k}var e={},l=String.prototype,q=a.prototype={between:function(c,b){var k=this.s,e=k.indexOf(c),l=k.indexOf(b),p=e+c.length;return new a(l>
e?k.slice(p,l):"")},camelize:function(){var c=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(a,c,b){return b?b.toUpperCase():""});return new a(c)},capitalize:function(){return new a(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(a){return this.s.charAt(a)},chompLeft:function(c){var b=this.s;return 0===b.indexOf(c)?(b=b.slice(c.length),new a(b)):this},chompRight:function(c){if(this.endsWith(c)){var b=this.s,b=b.slice(0,b.length-c.length);return new a(b)}return this},
collapseWhitespace:function(){var c=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new a(c)},contains:function(a){return 0<=this.s.indexOf(a)},count:function(a){for(var b=0,k=this.s.indexOf(a);0<=k;)b+=1,k=this.s.indexOf(a,k+1);return b},dasherize:function(){var c=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new a(c)},decodeHtmlEntities:function(){var c=this.s,c=c.replace(/&#(\d+);?/g,function(a,c){return String.fromCharCode(c)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,
function(a,c){return String.fromCharCode(parseInt(c,16))}).replace(/&([^;\W]+;?)/g,function(a,c){var b=c.replace(/;$/,""),b=e[c]||c.match(/;$/)&&e[b];return"number"===typeof b?String.fromCharCode(b):"string"===typeof b?b:a});return new a(c)},endsWith:function(a){var b=this.s.length-a.length;return 0<=b&&this.s.indexOf(a,b)===b},escapeHTML:function(){return new a(this.s.replace(/[&<>"']/g,function(a){return"&"+w[a]+";"}))},ensureLeft:function(c){var b=this.s;return 0===b.indexOf(c)?this:new a(c+b)},
ensureRight:function(c){var b=this.s;return this.endsWith(c)?this:new a(b+c)},humanize:function(){if(null===this.s||void 0===this.s)return new a("");var c=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new a(c)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&
this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(c){return 0<=c?(c=this.s.substr(0,c),new a(c)):this.right(-c)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(c,b){b=b||" ";if(this.s.length>=c)return new a(this.s);c-=this.s.length;var k=Array(Math.ceil(c/2)+1).join(b),e=Array(Math.floor(c/2)+1).join(b);return new a(k+this.s+e)},padLeft:function(c,
b){b=b||" ";return this.s.length>=c?new a(this.s):new a(Array(c-this.s.length+1).join(b)+this.s)},padRight:function(c,b){b=b||" ";return this.s.length>=c?new a(this.s):new a(this.s+Array(c-this.s.length+1).join(b))},parseCSV:function(a,b,k,e){a=a||",";k=k||"\\";"undefined"==typeof b&&(b='"');var l=0,p=[],m=[],t=this.s.length,v=!1;if("undefined"!==typeof e)var u=[];for(b||(v=!0);l<t;){var q=this.s.charAt(l);switch(q){case k:if(v&&(k!==b||this.s.charAt(l+1)===b)){l+=1;p.push(this.s.charAt(l));break}if(k!==
b)break;case b:v=!v;break;case a:v&&b?p.push(q):(m.push(p.join("")),p.length=0);break;case e:v?p.push(q):u&&(m.push(p.join("")),u.push(m),m=[],p.length=0);break;default:v&&p.push(q)}l+=1}m.push(p.join(""));return u?(u.push(m),u):m},replaceAll:function(c,b){var k=this.s.split(c).join(b);return new a(k)},right:function(c){return 0<=c?(c=this.s.substr(this.s.length-c,c),new a(c)):this.left(-c)},slugify:function(){var c=(new a(this.s.replace(/[^\w\s-]/g,"").toLowerCase())).dasherize().s;"-"===c.charAt(0)&&
(c=c.substr(1));return new a(c)},startsWith:function(a){return 0===this.s.lastIndexOf(a,0)},stripPunctuation:function(){return new a(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var c=this.s;m(0<arguments.length?arguments:[""],function(a){c=c.replace(RegExp("</?"+a+"[^<>]*>","gi"),"")});return new a(c)},template:function(c,h,k){var e=this.s;h=h||b.TMPL_OPEN;k=k||b.TMPL_CLOSE;(e.match(RegExp(h+"(.+?)"+k,"g"))||[]).forEach(function(a){var b=a.substring(h.length,a.length-
k.length);c[b]&&(e=e.replace(a,c[b]))});return new a(e)},times:function(c){return new a(Array(c+1).join(this.s))},toBoolean:function(){if("string"===typeof this.orig){var a=this.s.toLowerCase();return"true"===a||"yes"===a||"on"===a}return!0===this.orig||1===this.orig},toFloat:function(a){var b=parseFloat(this.s);return a?parseFloat(b.toFixed(a)):b},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var c;c="undefined"===typeof l.trim?this.s.replace(/(^\s*|\s*$)/g,
""):this.s.trim();return new a(c)},trimLeft:function(){var c;c=l.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,"");return new a(c)},trimRight:function(){var c;c=l.trimRight?this.s.trimRight():this.s.replace(/\s+$/,"");return new a(c)},truncate:function(c,b){var k=this.s;c=~~c;b=b||"...";if(k.length<=c)return new a(k);var e=k.slice(0,c+1).replace(/.(?=\W*\w*$)/g,function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "}),e=e.slice(e.length-2).match(/\w\w/)?e.replace(/\s*\S+$/,""):(new a(e.slice(0,
e.length-1))).trimRight().s;return(e+b).length>k.length?new a(k):new a(k.slice(0,e.length)+b)},toCSV:function(c,b){var e=",",l='"',p="\\",m=!0,t=!1,q=[];"object"===typeof c?(e=c.delimiter||e,e=c.separator||e,l=c.qualifier||l,m=!!c.encloseNumbers,p=c.escape||p,t=!!c.keys):"string"===typeof c&&(e=c);"string"===typeof b&&(l=b);null===b&&(l=null);if(this.orig instanceof Array)q=this.orig;else for(var v in this.orig)this.orig.hasOwnProperty(v)&&(t?q.push(v):q.push(this.orig[v]));p+=l;t=[];for(v=0;v<q.length;++v){var u=
null!==l&&""!==l;"number"==typeof q[v]&&(u&=m);u&&t.push(l);if(null!==q[v]&&void 0!==q[v]){var w=(new a(q[v])).replaceAll(l,p).s;t.push(w)}else t.push("");u&&t.push(l);e&&t.push(e)}t.length-=1;return new a(t.join(""))},toString:function(){return this.s},underscore:function(){var c=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();(new a(this.s.charAt(0))).isUpper()&&(c="_"+c);return new a(c)},unescapeHTML:function(){return new a(this.s.replace(/\&([^;]+);/g,
function(a,b){var e;return b in B?B[b]:(e=b.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(e[1],16)):(e=b.match(/^#(\d+)$/))?String.fromCharCode(~~e[1]):a}))},valueOf:function(){return this.s.valueOf()}},p=[],E=function(){var a;a=[];if(Object.getOwnPropertyNames)a=Object.getOwnPropertyNames(l),a.splice(a.indexOf("valueOf"),1),a.splice(a.indexOf("toString"),1);else{var b={},e;for(e in String.prototype)b[e]=e;for(e in Object.prototype)delete b[e];for(e in b)a.push(e)}b={};for(e=0;e<a.length;++e){var p=
a[e],m=l[p];try{var t=typeof m.apply("teststring",[]);b[p]=t}catch(q){}}return b}(),x;for(x in E)(function(c){var b=l[c];"function"==typeof b&&(q[c]||(q[c]="string"===E[c]?function(){return new a(b.apply(this,arguments))}:b))})(x);q.repeat=q.times;q.include=q.contains;q.toInteger=q.toInt;q.toBool=q.toBoolean;q.decodeHTMLEntities=q.decodeHtmlEntities;b.extendPrototype=function(){for(var a in q)(function(a){var c=q[a];l.hasOwnProperty(a)||(p.push(a),l[a]=function(){String.prototype.s=this;return c.apply(this,
arguments)})})(a)};b.restorePrototype=function(){for(var a=0;a<p.length;++a)delete String.prototype[p[a]];p.length=0};b.VERSION="1.5.0";b.TMPL_OPEN="{{";b.TMPL_CLOSE="}}";b.ENTITIES=e;"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=b:"function"===typeof define&&define.amd?define([],function(){return b}):window.S=b;var B={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},w={},t;for(t in B)w[B[t]]=t;e={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,
"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,
"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,
"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,
"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this);(function(){this.H={Check:{},TennisScoreKeeper:{}}}).call(this);(function(a){function b(b){return b===a||null===b}function m(a){this.isBetweenInclusive=function(b,e){return a>=b&&a<=e};this.isBetweenExclusive=function(b,e){return a>b&&a<e}}function e(a,b){var p=typeof a,m=typeof b;if(null===a&&null===b)return!0;if(p!==m)return!1;if("object"!==p&&"object"!==m)return a==b;var p=!0,x;for(x in a)if("function"!==typeof a[x]&&(p=p&&e(a[x],b[x]),!p))return!1;return!0}this.notEmpty=function(b,e){if(b===a||null===b)throw Error("Parameter '"+e+"' cannot be null or undefined");
};this.condition=function(a,b){if(!a)throw Error(b||"An error occured");};this.isEmpty=b;this.isNotEmpty=function(a){return!b(a)};this.areSame=e;this.value=function(a){return new m(a)}}).call(this.H.Check);(function(a,b,m){function e(b,c,e){a.condition("15b6d1fc81a043c081242617308b4fdc"===e,"GameTieMode must not be instantiated. Use TieMode enum.");a.notEmpty(b,"id");a.notEmpty(c,"pointByDifferenceFunc");a.condition("function"===typeof c,"pointByDifferenceFunc must be a function returning tennisPoint via point difference");this.PointByDifference=function(a){return c.call(null,a)};this.id=b}function l(b){a.notEmpty(b,"label");this.label=b;this.id=p(b)}function q(b,c,e,k){a.condition("82ee546ae51f4a77a048186fa13e98f1"===
k,"PointType must not be instantiated. Use PointTypes enum.");a.notEmpty(c,"label");a.notEmpty(e,"shotStyle");a.condition(b===w.PointWinner||b===w.PointLoser,"Point credit goes to winner or loser. Use pointCreditTypes enum");this.label=c;this.creditTo=b;this.shotStyle=e;this.id=p(c)}function p(a){return b(a).trim().replaceAll(" ","").replaceAll("/","").s}var E={Love:{id:"Love",code:"0"},Fifteen:{id:"Fifteen",code:"15"},Thirty:{id:"Thirty",code:"30"},Fourty:{id:"Fourty",code:"40"},Advantage:{id:"Advantage",
code:"Ad"}},x={advantageWin:new e("AdvantageWin",function(b){a.condition(a.value(b).isBetweenInclusive(-1,1),"Something is wrong, point difference must be [-1,1]");return a.value(b).isBetweenInclusive(-1,0)?E.Fourty:1===b?E.Advantage:E.Love},"15b6d1fc81a043c081242617308b4fdc"),singlePointWin:new e("SinglePointWin",function(b){a.condition(a.value(b).isBetweenInclusive(-1,1),"Something is wrong, point difference must be [-1,1]");return 0===b?E.Fourty:E.Love},"15b6d1fc81a043c081242617308b4fdc")},B={tiebreak:{id:"TieBreak",
minimumGamePoints:7},superTiebreak:{id:"SuperTieBreak",minimumGamePoints:10},gameDifference:{id:"GameDifference",minimumGamePoints:4}};m={NormalPassing:new l("Normal/Passing"),Volley:new l("Volley"),Smash:new l("Smash"),Lob:new l("Lob"),Drop:new l("Drop")};var w={PointWinner:0,PointLoser:1};this.Model={Player:function(b){a.notEmpty(b,"name");var c=this;this.name=b;this.id=p(b);this.setName=function(a){c.name=a;c.id=p(a)}},MatchDefinition:function(b,c,e){a.notEmpty(b,"playerOne");a.notEmpty(c,"playerTwo");
this.players=[b,c];this.gamesPerSet=6;this.setsCount=3;this.gameTieMode=x.advantageWin;this.lastSetTieMode=B.tiebreak;this.startingPlayer=e?c:b},TieMode:x,LastSetTieMode:B,Point:function(b,c,e,k){a.notEmpty(b,"forPlayer");a.notEmpty(c,"creditedTo");a.notEmpty(e,"type");this.player=b;this.creditedTo=c;this.timestamp=new Date;this.type=e;this.isOnSecondServe=k},ShotStyles:m,PointCreditTypes:w,PointTypes:{WinningShot:function(a){return new q(w.PointWinner,"Winning Shot",a,"82ee546ae51f4a77a048186fa13e98f1")},
ForcedError:function(a){return new q(w.PointWinner,"Forced Error",a,"82ee546ae51f4a77a048186fa13e98f1")},UnforcedError:function(a){return new q(w.PointLoser,"Unforced Error",a,"82ee546ae51f4a77a048186fa13e98f1")},Ace:function(a){return new q(w.PointWinner,"Ace",a,"82ee546ae51f4a77a048186fa13e98f1")},DoubleFault:function(a){return new q(w.PointLoser,"Double Fault",a,"82ee546ae51f4a77a048186fa13e98f1")}},PointType:q,TennisPoints:E}}).call(this.H.TennisScoreKeeper,this.H.Check,this.S);(function(a,b,m){function e(e){a.notEmpty(e,"player");this.Player=e;this.Game=b.TennisPoints.Love;this.Sets=this.Games=this.GamePoints=0}function l(b,e,l,m){a.notEmpty(b,"playerOneScoreProjection");a.notEmpty(e,"playerTwoScoreProjection");a.notEmpty(l,"setsPerMatch");a.notEmpty(m,"servingPlayer");var q=this,t=Math.ceil(l/2);this.PlayerOne=b;this.PlayerTwo=e;this.Winner=function(){return b.Sets===t?b:e.Sets===t?e:null};this.IsWon=function(){return null!==q.Winner()};this.ServingPlayer=function(){return m}}
var q=[b.TennisPoints.Love,b.TennisPoints.Fifteen,b.TennisPoints.Thirty,b.TennisPoints.Fourty];this.ScoreProjector=function(p,E){function x(b){a.notEmpty(b,"points");var c=new e(p.players[0]),h=new e(p.players[1]);y=p.startingPlayer;ba=b;for(var m=0;m<b.length;m++){var q=b[m];C=q;q.player===c.Player?B(c,h):B(h,c)}b=new l(c,h,p.setsCount,y);b.IsWon()&&k("raiseOnMatchWon",[new s(c,h,"22eb1d7990b640aab2c47aa9ba18572f")]);return b}function B(e,l){e.GamePoints++;k("raiseOnPointWon",[new s(e,l,"22eb1d7990b640aab2c47aa9ba18572f")]);
if(h(e,l))Ca=y,0!==(e.GamePoints+l.GamePoints)%2&&t(),2<=e.GamePoints-l.GamePoints&&e.GamePoints>=(e.Sets!==l.Sets||e.Sets!==Math.floor(p.setsCount/2)?7:p.lastSetTieMode.minimumGamePoints)&&(y=Ca===e.Player?l.Player:e.Player,w(e,l),c(e,l));else if(3>=e.GamePoints)e.Game=q[e.GamePoints];else if(a.value(e.GamePoints-l.GamePoints).isBetweenInclusive(-1,1)){var m=e.GamePoints-l.GamePoints;e.Game=p.gameTieMode.PointByDifference(m);l.Game=p.gameTieMode.PointByDifference(-m);0<m&&(e.Game==b.TennisPoints.Love&&
l.Game==b.TennisPoints.Love)&&w(e,l)}else w(e,l)}function w(a,e){k("raiseOnGameWon",[new s(a,e,"22eb1d7990b640aab2c47aa9ba18572f")]);a.Game=b.TennisPoints.Love;e.Game=b.TennisPoints.Love;a.GamePoints=0;e.GamePoints=0;a.Games++;t();2<=a.Games-e.Games&&a.Games>=p.gamesPerSet&&c(a,e)}function t(){y=y===p.players[0]?p.players[1]:p.players[0]}function c(a,b){k("raiseOnSetWon",[new s(a,b,"22eb1d7990b640aab2c47aa9ba18572f")]);a.Games=0;b.Games=0;a.Sets++}function h(a,c){var e=a.Games===p.gamesPerSet&&c.Games===
p.gamesPerSet;return a.Sets!==c.Sets||a.Sets!==Math.floor(p.setsCount/2)?e:e&&p.lastSetTieMode!==b.LastSetTieMode.gameDifference}function k(a,b){E&&E[a].apply(m,b)}function s(b,c,e){a.condition("22eb1d7990b640aab2c47aa9ba18572f"===e,"HookArgs must not be instantiated. They are exposed for intellisense");this.WinningPlayer=b.Player;this.WinningGamePoints=b.GamePoints;this.LosingPlayer=c.Player;this.LosingGamePoints=c.GamePoints;this.ServingPlayer=y;this.IsTiebreak=h(b,c);this.DecidingPoint=C;this.AllPoints=
ba}a.notEmpty(p,"gameDefinition");var y=p.startingPlayer,Ca=null,C=null,ba=[];this.processPoints=this.toTennisScore=x;this.HookArgs=s};this.ScoreProjectorHooks=function(a,b,e,l){function q(a,b){"function"===typeof a&&a.apply(m,b)}var t=this;this.onPointWon=a;this.onGameWon=b;this.onSetWon=e;this.onMatchWon=l;this.raiseOnPointWon=function(){q(t.onPointWon,arguments)};this.raiseOnGameWon=function(){q(t.onGameWon,arguments)};this.raiseOnSetWon=function(){q(t.onSetWon,arguments)};this.raiseOnMatchWon=
function(){q(t.onMatchWon,arguments)}}}).call(this.H.TennisScoreKeeper,this.H.Check,this.H.TennisScoreKeeper.Model);(function(a,b,m){function e(e){a.notEmpty(e,"players");a.condition(2===e.length,"The match must have exactly two players");this.pointFor=function(a,l,m){var B=a===e[0]?e[1]:e[0];return new b.Point(a,l.creditTo===b.PointCreditTypes.PointWinner?a:B,l,!0===m?!0:!1)}}var l=this;this.Engine=function(b){a.notEmpty(b,"gameDefinition");var m=[],E=new e(b.players),x=[],B=new l.ScoreProjector(b),x=[b.players[0],b.players[1]];this.scorePointFor=function(a,b,c){a=E.pointFor(a,b,c);m.push(a)};this.undoLatestPoint=
function(){0!==m.length&&m.pop()};this.players=x;this.points=m;this.tennisScore=function(){return B.toTennisScore(m)}};this.PointFactory=e}).call(this.H.TennisScoreKeeper,this.H.Check,this.H.TennisScoreKeeper.Model,this._);