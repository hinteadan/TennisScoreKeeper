var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,d){var k=d;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(k=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,k)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var d=a;(d=d.substring(0,d.lastIndexOf(".")))&&!goog.getObjectByName(d);)goog.implicitNamespaces_[d]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,d,k){a=a.split(".");k=k||goog.global;a[0]in k||!k.execScript||k.execScript("var "+a[0]);for(var f;a.length&&(f=a.shift());)!a.length&&goog.isDef(d)?k[f]=d:k=k[f]?k[f]:k[f]={}};goog.getObjectByName=function(a,d){for(var k=a.split("."),f=d||goog.global,m;m=k.shift();)if(goog.isDefAndNotNull(f[m]))f=f[m];else return null;return f};
goog.globalize=function(a,d){var k=d||goog.global,f;for(f in a)k[f]=a[f]};goog.addDependency=function(a,d,k){if(!COMPILED){var f;a=a.replace(/\\/g,"/");for(var m=goog.dependencies_,p=0;f=d[p];p++)m.nameToPath[f]=a,a in m.pathToNames||(m.pathToNames[a]={}),m.pathToNames[a][f]=!0;for(f=0;d=k[f];f++)a in m.requires||(m.requires[a]={}),m.requires[a][d]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var d=goog.getPathFromDeps_(a);if(d){goog.included_[d]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,d){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),d=a.length-1;0<=d;--d){var k=a[d].src,f=k.lastIndexOf("?"),f=
-1==f?k.length:f;if("base.js"==k.substr(f-7,7)){goog.basePath=k.substr(0,f-7);break}}},goog.importScript_=function(a){var d=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&d(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var d=goog.global.document;if("complete"==d.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}d.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(m){if(!(m in f.written)){if(!(m in f.visited)&&(f.visited[m]=!0,m in f.requires))for(var q in f.requires[m])if(!goog.isProvided_(q))if(q in f.nameToPath)a(f.nameToPath[q]);else throw Error("Undefined nameToPath for "+q);m in k||(k[m]=!0,d.push(m))}}var d=[],k={},f=goog.dependencies_,m;for(m in goog.included_)f.written[m]||a(m);for(m=0;m<d.length;m++)if(d[m])goog.importScript_(goog.basePath+d[m]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var d=typeof a;if("object"==d)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return d;var k=Object.prototype.toString.call(a);if("[object Window]"==k)return"object";if("[object Array]"==k||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==k||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==d&&"undefined"==typeof a.call)return"object";return d};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var d=goog.typeOf(a);return"array"==d||"object"==d&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var d=typeof a;return"object"==d&&null!=a||"function"==d};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(d){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var d=goog.typeOf(a);if("object"==d||"array"==d){if(a.clone)return a.clone();var d="array"==d?[]:{},k;for(k in a)d[k]=goog.cloneObject(a[k]);return d}return a};goog.bindNative_=function(a,d,k){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,d,k){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(m,f);return a.apply(d,m)}}return function(){return a.apply(d,arguments)}};goog.bind=function(a,d,k){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,d){var k=Array.prototype.slice.call(arguments,1);return function(){var d=Array.prototype.slice.call(arguments);d.unshift.apply(d,k);return a.apply(this,d)}};goog.mixin=function(a,d){for(var k in d)a[k]=d[k]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var d=goog.global.document,k=d.createElement("script");k.type="text/javascript";k.defer=!1;k.appendChild(d.createTextNode(a));d.body.appendChild(k);
d.body.removeChild(k)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,d){var k=function(a){return goog.cssNameMapping_[a]||a},f=function(a){a=a.split("-");for(var d=[],q=0;q<a.length;q++)d.push(k(a[q]));return d.join("-")},f=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?k:f:function(a){return a};return d?a+"-"+f(d):f(a)};goog.setCssNameMapping=function(a,d){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=d};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,d){var k=d||{},f;for(f in k){var m=(""+k[f]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+f+"\\}","gi"),m)}return a};goog.getMsgWithFallback=function(a,d){return a};goog.exportSymbol=function(a,d,k){goog.exportPath_(a,d,k)};goog.exportProperty=function(a,d,k){a[d]=k};
goog.inherits=function(a,d){function k(){}k.prototype=d.prototype;a.superClass_=d.prototype;a.prototype=new k;a.prototype.constructor=a};
goog.base=function(a,d,k){var f=arguments.callee.caller;if(goog.DEBUG&&!f)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(f.superClass_)return f.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var m=Array.prototype.slice.call(arguments,2),p=!1,q=a.constructor;q;q=q.superClass_&&q.superClass_.constructor)if(q.prototype[d]===f)p=!0;else if(p)return q.prototype[d].apply(a,
m);if(a[d]===f)return a.constructor.prototype[d].apply(a,m);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};/*

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(a){function d(a,c,b){b=(b||0)-1;for(var d=a.length;++b<d;)if(a[b]===c)return b;return-1}function k(a,c){var b=typeof c;a=a.cache;if("boolean"==b||null==c)return a[c];"number"!=b&&"string"!=b&&(b="object");var l="number"==b?c:Aa+c;a=a[b]||(a[b]={});return"object"==b?a[l]&&-1<d(a[l],c)?0:-1:a[l]?0:-1}function f(a){var c=this.cache,b=typeof a;if("boolean"==b||null==a)c[a]=!0;else{"number"!=b&&"string"!=b&&(b="object");var d="number"==b?a:Aa+a,l=c[b]||(c[b]={});"object"==b?(l[d]||(l[d]=[])).push(a)==
this.array.length&&(c[b]=!1):l[d]=!0}}function m(a){return a.charCodeAt(0)}function p(a,c){var b=a.index,d=c.index;a=a.criteria;c=c.criteria;if(a!==c){if(a>c||"undefined"==typeof a)return 1;if(a<c||"undefined"==typeof c)return-1}return b<d?-1:1}function q(a){var c=-1,b=a.length,d=A();d["false"]=d["null"]=d["true"]=d.undefined=!1;var l=A();l.array=a;l.cache=d;for(l.push=f;++c<b;)l.push(a[c]);return!1===d.object?(t(l),null):l}function v(a){return"\\"+Ba[a]}function w(){return r.pop()||[]}function A(){return x.pop()||
{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function s(a){a.length=0;r.length<na&&r.push(a)}function t(a){var c=a.cache;c&&t(c);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;x.length<na&&x.push(a)}function c(a,c,b){c||(c=0);"undefined"==typeof b&&(b=a?a.length:0);var d=-1;b=b-c||0;for(var l=Array(0>b?0:b);++d<b;)l[d]=a[c+d];return l}function b(f){function e(a){return a&&
"object"==typeof a&&!K(a)&&E.call(a,"__wrapped__")?a:new r(a)}function r(a){this.__wrapped__=a}function x(a,g,h,n){function c(){var n=arguments,l=e?this:g;Q||(a=g[b]);h.length&&(n=n.length?(n=D.call(n),d?n.concat(h):h.concat(n)):h);return this instanceof c?(l=M(a.prototype)?oa(a.prototype):{},n=a.apply(l,n),M(n)?n:l):a.apply(l,n)}var Q=T(a),e=!h,b=g;if(e){var d=n;h=g}else if(!Q){if(!n)throw new ub;g=a}return c}function na(a){return Xa[a]}function J(a,g,h){var n=(n=e.indexOf)===Ya?d:n;return n}function Y(a){return function(g,
h,n,c){"boolean"!=typeof h&&null!=h&&(n=(c=n)&&c[h]===g?l:h,h=!1);null!=n&&(n=e.createCallback(n,c));return a(g,h,n,c)}}function Ba(a){var g,h;if(!a||F.call(a)!=U||(g=a.constructor,T(g)&&!(g instanceof g)))return!1;X(a,function(g,a){h=a});return h===l||E.call(a,h)}function vb(a){return wb[a]}function Ca(a,g,h,n,z,Q){var b=a;"boolean"!=typeof g&&null!=g&&(n=h,h=g,g=!1);if("function"==typeof h){h="undefined"==typeof n?h:e.createCallback(h,n,1);b=h(b);if("undefined"!=typeof b)return b;b=a}if(n=M(b)){var d=
F.call(b);if(!N[d])return b;var y=K(b)}if(!n||!g)return n?y?c(b):Da({},b):b;n=R[d];switch(d){case da:case ea:return new n(+b);case fa:case Z:return new n(b);case ga:return n(b.source,xb.exec(b))}d=!z;z||(z=w());Q||(Q=w());for(var u=z.length;u--;)if(z[u]==a)return Q[u];b=y?n(b.length):{};y&&(E.call(a,"index")&&(b.index=a.index),E.call(a,"input")&&(b.input=a.input));z.push(a);Q.push(b);(y?B:C)(a,function(a,n){b[n]=Ca(a,g,h,l,z,Q)});d&&(s(z),s(Q));return b}function pa(a){var g=[];X(a,function(a,n){T(a)&&
g.push(n)});return g.sort()}function Za(a){for(var g=-1,h=L(a),n=h.length,c={};++g<n;){var b=h[g];c[a[b]]=b}return c}function $(a,g,h,n,c,b){var d=h===aa;if("function"==typeof h&&!d){h=e.createCallback(h,n,2);var l=h(a,g);if("undefined"!=typeof l)return!!l}if(a===g)return 0!==a||1/a==1/g;var y=typeof a,u=typeof g;if(a===a&&(!a||"function"!=y&&"object"!=y)&&(!g||"function"!=u&&"object"!=u))return!1;if(null==a||null==g)return a===g;u=F.call(a);y=F.call(g);u==ha&&(u=U);y==ha&&(y=U);if(u!=y)return!1;
switch(u){case da:case ea:return+a==+g;case fa:return a!=+a?g!=+g:0==a?1/a==1/g:a==+g;case ga:case Z:return a==S(g)}y=u==qa;if(!y){if(E.call(a,"__wrapped__ ")||E.call(g,"__wrapped__"))return $(a.__wrapped__||a,g.__wrapped__||g,h,n,c,b);if(u!=U)return!1;var u=a.constructor,f=g.constructor;if(u!=f&&!(T(u)&&u instanceof u&&T(f)&&f instanceof f))return!1}f=!c;c||(c=w());b||(b=w());for(u=c.length;u--;)if(c[u]==a)return b[u]==g;var m=0,l=!0;c.push(a);b.push(g);if(y){u=a.length;m=g.length;l=m==a.length;
if(!l&&!d)return l;for(;m--;)if(y=u,f=g[m],d)for(;y--&&!(l=$(a[y],f,h,n,c,b)););else if(!(l=$(a[m],f,h,n,c,b)))break;return l}X(g,function(g,e,d){if(E.call(d,e))return m++,l=E.call(a,e)&&$(a[e],g,h,n,c,b)});l&&!d&&X(a,function(g,a,h){if(E.call(h,a))return l=-1<--m});f&&(s(c),s(b));return l}function T(a){return"function"==typeof a}function M(a){return!(!a||!I[typeof a])}function $a(a){return"number"==typeof a||F.call(a)==fa}function ia(a){return"string"==typeof a||F.call(a)==Z}function ab(a,g,h){var n=
arguments,c=0,b=2;if(!M(a))return a;if(h===aa)var d=n[3],l=n[4],y=n[5];else{var f=!0,l=w(),y=w();"number"!=typeof h&&(b=n.length);3<b&&"function"==typeof n[b-2]?d=e.createCallback(n[--b-1],n[b--],2):2<b&&"function"==typeof n[b-1]&&(d=n[--b])}for(;++c<b;)(K(n[c])?B:C)(n[c],function(g,h){var n,c,z=g,b=a[h];if(g&&((c=K(g))||Ea(g))){for(z=l.length;z--;)if(n=l[z]==g){b=y[z];break}if(!n){var e;d&&(z=d(b,g),e="undefined"!=typeof z)&&(b=z);e||(b=c?K(b)?b:[]:Ea(b)?b:{});l.push(g);y.push(b);e||(b=ab(b,g,aa,
d,l,y))}}else d&&(z=d(b,g),"undefined"==typeof z&&(z=g)),"undefined"!=typeof z&&(b=z);a[h]=b});f&&(s(l),s(y));return a}function Fa(a){for(var g=-1,h=L(a),n=h.length,c=G(n);++g<n;)c[g]=a[h[g]];return c}function bb(a,g,h){var n=-1,c=J(),b=a?a.length:0,e=!1;h=(0>h?O(0,b+h):h)||0;b&&"number"==typeof b?e=-1<(ia(a)?a.indexOf(g,h):c(a,g,h)):C(a,function(a){if(++n>=h)return!(e=a===g)});return e}function cb(a,g,h){var n=!0;g=e.createCallback(g,h);h=-1;var c=a?a.length:0;if("number"==typeof c)for(;++h<c&&(n=
!!g(a[h],h,a)););else C(a,function(a,h,c){return n=!!g(a,h,c)});return n}function ra(a,g,h){var n=[];g=e.createCallback(g,h);h=-1;var c=a?a.length:0;if("number"==typeof c)for(;++h<c;){var b=a[h];g(b,h,a)&&n.push(b)}else C(a,function(a,h,c){g(a,h,c)&&n.push(a)});return n}function Ga(a,g,h){g=e.createCallback(g,h);h=-1;var c=a?a.length:0;if("number"==typeof c)for(;++h<c;){var b=a[h];if(g(b,h,a))return b}else{var d;C(a,function(a,h,c){if(g(a,h,c))return d=a,!1});return d}}function B(a,g,h){var c=-1,
b=a?a.length:0;g=g&&"undefined"==typeof h?g:e.createCallback(g,h);if("number"==typeof b)for(;++c<b&&!1!==g(a[c],c,a););else C(a,g);return a}function Ha(a,g,h){var c=-1,b=a?a.length:0;g=e.createCallback(g,h);if("number"==typeof b)for(var d=G(b);++c<b;)d[c]=g(a[c],c,a);else d=[],C(a,function(a,h,b){d[++c]=g(a,h,b)});return d}function db(a,g,h){var c=-Infinity,b=c;if(!g&&K(a)){h=-1;for(var d=a.length;++h<d;){var l=a[h];l>b&&(b=l)}}else g=!g&&ia(a)?m:e.createCallback(g,h),B(a,function(a,h,e){h=g(a,h,
e);h>c&&(c=h,b=a)});return b}function Ia(a,g){var h=-1,c=a?a.length:0;if("number"==typeof c)for(var b=G(c);++h<c;)b[h]=a[h][g];return b||Ha(a,g)}function Ja(a,g,h,c){if(!a)return h;var b=3>arguments.length;g=e.createCallback(g,c,4);var d=-1,l=a.length;if("number"==typeof l)for(b&&(h=a[++d]);++d<l;)h=g(h,a[d],d,a);else C(a,function(a,c,n){h=b?(b=!1,a):g(h,a,c,n)});return h}function eb(a,g,h,c){var b=a?a.length:0,d=3>arguments.length;if("number"!=typeof b)var l=L(a),b=l.length;g=e.createCallback(g,
c,4);B(a,function(c,n,e){n=l?l[--b]:--b;h=d?(d=!1,a[n]):g(h,a[n],n,e)});return h}function fb(a,g,h){var c;g=e.createCallback(g,h);h=-1;var b=a?a.length:0;if("number"==typeof b)for(;++h<b&&!(c=g(a[h],h,a)););else C(a,function(a,h,b){return!(c=g(a,h,b))});return!!c}function gb(a){var g=-1,h=J(),c=a?a.length:0,b=ba.apply(H,D.call(arguments,1)),e=[],l=c>=Ka&&h===d;if(l){var f=q(b);f?(h=k,b=f):l=!1}for(;++g<c;)f=a[g],0>h(b,f)&&e.push(f);l&&t(b);return e}function La(a,g,h){if(a){var b=0,d=a.length;if("number"!=
typeof g&&null!=g){var l=-1;for(g=e.createCallback(g,h);++l<d&&g(a[l],l,a);)b++}else if(b=g,null==b||h)return a[0];return c(a,0,sa(O(0,b),d))}}function Ya(a,g,h){if("number"==typeof h){var c=a?a.length:0;h=0>h?O(0,c+h):h||0}else if(h)return h=hb(a,g),a[h]===g?h:-1;return a?d(a,g,h):-1}function Ma(a,g,h){if("number"!=typeof g&&null!=g){var b=0,d=-1,l=a?a.length:0;for(g=e.createCallback(g,h);++d<l&&g(a[d],d,a);)b++}else b=null==g||h?1:O(0,g);return c(a,b)}function hb(a,g,h,c){var b=0,d=a?a.length:b;
h=h?e.createCallback(h,c,1):Na;for(g=h(g);b<d;)c=b+d>>>1,h(a[c])<g?b=c+1:d=c;return b}function ib(a){for(var g=-1,h=a?db(Ia(a,"length")):0,c=G(0>h?0:h);++g<h;)c[g]=Ia(a,g);return c}function jb(a,g){for(var h=-1,c=a?a.length:0,b={};++h<c;){var d=a[h];g?b[d]=g[h]:b[d[0]]=d[1]}return b}function Oa(a,g){return kb.fastBind||V&&2<arguments.length?V.call.apply(V,arguments):x(a,g,D.call(arguments,2))}function lb(a,g,h){function c(){ta(r);ta(t);m=0;r=t=null}function b(){var g=p&&(!s||1<m);c();g&&(!1!==q&&
(k=new ua),l=a.apply(f,e))}function d(){c();if(p||q!==g)k=new ua,l=a.apply(f,e)}var e,l,f,m=0,k=0,q=!1,r=null,t=null,p=!0;g=O(0,g||0);if(!0===h)var s=!0,p=!1;else M(h)&&(s=h.leading,q="maxWait"in h&&O(g,h.maxWait||0),p="trailing"in h?h.trailing:p);return function(){e=arguments;f=this;m++;ta(t);if(!1===q)s&&2>m&&(l=a.apply(f,e));else{var h=new ua;r||s||(k=h);var c=q-(h-k);0>=c?(ta(r),r=null,k=h,l=a.apply(f,e)):r||(r=va(d,c))}g!==q&&(t=va(b,g));return l}}function mb(a){var g=D.call(arguments,1);return va(function(){a.apply(l,
g)},1)}function Na(a){return a}function nb(a){B(pa(a),function(g){var h=e[g]=a[g];e.prototype[g]=function(){var a=this.__wrapped__,g=[a];wa.apply(g,arguments);g=h.apply(e,g);return a&&"object"==typeof a&&a===g?this:new r(g)}})}function ob(){return this.__wrapped__}f=f?W.defaults(a.Object(),f,W.pick(a,yb)):a;var G=f.Array,ja=f.Boolean,ua=f.Date,Pa=f.Function,P=f.Math,zb=f.Number,ka=f.Object,Qa=f.RegExp,S=f.String,ub=f.TypeError,H=[],Ra=ka.prototype,Ab=f._,ca=Qa("^"+S(Ra.valueOf).replace(/[.*+?^${}()|[\]\\]/g,
"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Bb=P.ceil,ta=f.clearTimeout,ba=H.concat,pb=P.floor,Cb=Pa.prototype.toString,la=ca.test(la=ka.getPrototypeOf)&&la,E=Ra.hasOwnProperty,wa=H.push,xa=f.setImmediate,va=f.setTimeout,F=Ra.toString,V=ca.test(V=F.bind)&&V,oa=ca.test(oa=ka.create)&&oa,Sa=ca.test(Sa=G.isArray)&&Sa,Db=f.isFinite,Eb=f.isNaN,ya=ca.test(ya=ka.keys)&&ya,O=P.max,sa=P.min,Ta=f.parseInt,qb=P.random,D=H.slice,P=ca.test(f.attachEvent),P=V&&!/\n|true/.test(V+P),R={};R[qa]=G;R[da]=ja;R[ea]=
ua;R[rb]=Pa;R[U]=ka;R[fa]=zb;R[ga]=Qa;R[Z]=S;r.prototype=e.prototype;var kb=e.support={};kb.fastBind=V&&!P;e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:sb,variable:"",imports:{_:e}};var K=Sa,ja=function(a){var g,h=[];if(!a||!I[typeof a])return h;for(g in a)E.call(a,g)&&h.push(g);return h},L=ya?function(a){return M(a)?ya(a):[]}:ja,Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wb=Za(Xa),Da=function(a,g,h){var c,b=a,d=b;if(!b)return d;var l=arguments,
f=0,m="number"==typeof h?2:l.length;if(3<m&&"function"==typeof l[m-2])var u=e.createCallback(l[--m-1],l[m--],2);else 2<m&&"function"==typeof l[m-1]&&(u=l[--m]);for(;++f<m;)if((b=l[f])&&I[typeof b])for(var k=-1,q=I[typeof b]&&L(b),r=q?q.length:0;++k<r;)c=q[k],d[c]=u?u(d[c],b[c]):b[c];return d},Ua=function(a,g,h){var c,b=a,d=b;if(!b)return d;for(var e=arguments,l=0,f="number"==typeof h?2:e.length;++l<f;)if((b=e[l])&&I[typeof b])for(var m=-1,q=I[typeof b]&&L(b),k=q?q.length:0;++m<k;)c=q[m],"undefined"==
typeof d[c]&&(d[c]=b[c]);return d},X=function(a,g,h){var c;if(!a||!I[typeof a])return a;g=g&&"undefined"==typeof h?g:e.createCallback(g,h);for(c in a)if(!1===g(a[c],c,a))break;return a},C=function(a,g,h){if(!a||!I[typeof a])return a;g=g&&"undefined"==typeof h?g:e.createCallback(g,h);for(var c=-1,b=I[typeof a]&&L(a),d=b?b.length:0;++c<d&&(h=b[c],!1!==g(a[h],h,a)););return a},Ea=function(a){if(!a||F.call(a)!=U)return!1;var g=a.valueOf,h="function"==typeof g&&(h=la(g))&&la(h);return h?a==h||la(a)==h:
Ba(a)},ja=Y(function g(a,c,b){for(var d=-1,e=a?a.length:0,l=[];++d<e;){var f=a[d];b&&(f=b(f,d,a));K(f)?wa.apply(l,c?f:g(f)):l.push(f)}return l}),Va=Y(function(a,c,b){var e=-1,l=J(),f=a?a.length:0,m=[],r=!c&&f>=Ka&&l===d,u=b||r?w():m;if(r){var p=q(u);p?(l=k,u=p):(r=!1,u=b?u:(s(u),m))}for(;++e<f;){var p=a[e],x=b?b(p,e,a):p;if(c?!e||u[u.length-1]!==x:0>l(u,x))(b||r)&&u.push(x),m.push(p)}r?(s(u.array),t(u)):b&&s(u);return m});P&&(Wa&&"function"==typeof xa)&&(mb=Oa(xa,f));xa=8==Ta(tb+"08")?Ta:function(a,
c){return Ta(ia(a)?a.replace(Fb,""):a,c||0)};e.after=function(a,c){return 1>a?c():function(){if(1>--a)return c.apply(this,arguments)}};e.assign=Da;e.at=function(a){for(var c=-1,b=ba.apply(H,D.call(arguments,1)),d=b.length,e=G(d);++c<d;)e[c]=a[b[c]];return e};e.bind=Oa;e.bindAll=function(a){for(var c=1<arguments.length?ba.apply(H,D.call(arguments,1)):pa(a),b=-1,d=c.length;++b<d;){var e=c[b];a[e]=Oa(a[e],a)}return a};e.bindKey=function(a,c){return x(a,c,D.call(arguments,2),aa)};e.compact=function(a){for(var c=
-1,b=a?a.length:0,d=[];++c<b;){var e=a[c];e&&d.push(e)}return d};e.compose=function(){var a=arguments;return function(){for(var c=arguments,b=a.length;b--;)c=[a[b].apply(this,c)];return c[0]}};e.countBy=function(a,c,b){var d={};c=e.createCallback(c,b);B(a,function(a,g,b){g=S(c(a,g,b));E.call(d,g)?d[g]++:d[g]=1});return d};e.createCallback=function(a,c,b){if(null==a)return Na;var d=typeof a;if("function"!=d){if("object"!=d)return function(c){return c[a]};var e=L(a);return function(c){for(var b=e.length,
h=!1;b--&&(h=$(c[e[b]],a[e[b]],aa)););return h}}return"undefined"==typeof c||ma&&!ma.test(Cb.call(a))?a:1===b?function(b){return a.call(c,b)}:2===b?function(b,d){return a.call(c,b,d)}:4===b?function(b,d,e,n){return a.call(c,b,d,e,n)}:function(b,d,e){return a.call(c,b,d,e)}};e.debounce=lb;e.defaults=Ua;e.defer=mb;e.delay=function(a,c){var b=D.call(arguments,2);return va(function(){a.apply(l,b)},c)};e.difference=gb;e.filter=ra;e.flatten=ja;e.forEach=B;e.forIn=X;e.forOwn=C;e.functions=pa;e.groupBy=function(a,
c,b){var d={};c=e.createCallback(c,b);B(a,function(a,g,b){g=S(c(a,g,b));(E.call(d,g)?d[g]:d[g]=[]).push(a)});return d};e.initial=function(a,b,d){if(!a)return[];var l=0,f=a.length;if("number"!=typeof b&&null!=b){var m=f;for(b=e.createCallback(b,d);m--&&b(a[m],m,a);)l++}else l=null==b||d?1:b||l;return c(a,0,sa(O(0,f-l),f))};e.intersection=function(a){for(var c=arguments,b=c.length,e=-1,l=w(),f=-1,m=J(),r=a?a.length:0,u=[],p=w();++e<b;){var x=c[e];l[e]=m===d&&(x?x.length:0)>=Ka&&q(e?c[e]:p)}a:for(;++f<
r;){var v=l[0],x=a[f];if(0>(v?k(v,x):m(p,x))){e=b;for((v||p).push(x);--e;)if(v=l[e],0>(v?k(v,x):m(c[e],x)))continue a;u.push(x)}}for(;b--;)(v=l[b])&&t(v);s(l);s(p);return u};e.invert=Za;e.invoke=function(a,c){var b=D.call(arguments,2),d=-1,e="function"==typeof c,l=a?a.length:0,f=G("number"==typeof l?l:0);B(a,function(a){f[++d]=(e?c:a[c]).apply(a,b)});return f};e.keys=L;e.map=Ha;e.max=db;e.memoize=function(a,c){function b(){var d=b.cache,e=Aa+(c?c.apply(this,arguments):arguments[0]);return E.call(d,
e)?d[e]:d[e]=a.apply(this,arguments)}b.cache={};return b};e.merge=ab;e.min=function(a,c,b){var d=Infinity,l=d;if(!c&&K(a)){b=-1;for(var f=a.length;++b<f;){var q=a[b];q<l&&(l=q)}}else c=!c&&ia(a)?m:e.createCallback(c,b),B(a,function(a,b,g){b=c(a,b,g);b<d&&(d=b,l=a)});return l};e.omit=function(a,c,b){var d=J(),l="function"==typeof c,f={};if(l)c=e.createCallback(c,b);else var m=ba.apply(H,D.call(arguments,1));X(a,function(a,b,g){if(l?!c(a,b,g):0>d(m,b))f[b]=a});return f};e.once=function(a){var c,b;return function(){if(c)return b;
c=!0;b=a.apply(this,arguments);a=null;return b}};e.pairs=function(a){for(var c=-1,b=L(a),d=b.length,e=G(d);++c<d;){var l=b[c];e[c]=[l,a[l]]}return e};e.partial=function(a){return x(a,D.call(arguments,1))};e.partialRight=function(a){return x(a,D.call(arguments,1),null,aa)};e.pick=function(a,c,b){var d={};if("function"!=typeof c)for(var l=-1,f=ba.apply(H,D.call(arguments,1)),m=M(a)?f.length:0;++l<m;){var q=f[l];q in a&&(d[q]=a[q])}else c=e.createCallback(c,b),X(a,function(a,b,g){c(a,b,g)&&(d[b]=a)});
return d};e.pluck=Ia;e.range=function(a,c,b){a=+a||0;b=+b||1;null==c&&(c=a,a=0);var d=-1;c=O(0,Bb((c-a)/b));for(var e=G(c);++d<c;)e[d]=a,a+=b;return e};e.reject=function(a,c,b){c=e.createCallback(c,b);return ra(a,function(a,b,g){return!c(a,b,g)})};e.rest=Ma;e.shuffle=function(a){var c=-1,b=a?a.length:0,d=G("number"==typeof b?b:0);B(a,function(a){var b=pb(qb()*(++c+1));d[c]=d[b];d[b]=a});return d};e.sortBy=function(a,c,b){var d=-1,l=a?a.length:0,f=G("number"==typeof l?l:0);c=e.createCallback(c,b);
B(a,function(a,b,g){var e=f[++d]=A();e.criteria=c(a,b,g);e.index=d;e.value=a});l=f.length;for(f.sort(p);l--;)a=f[l],f[l]=a.value,t(a);return f};e.tap=function(a,c){c(a);return a};e.throttle=function(a,c,b){var d=!0,e=!0;!1===b?d=!1:M(b)&&(d="leading"in b?b.leading:d,e="trailing"in b?b.trailing:e);b=A();b.leading=d;b.maxWait=c;b.trailing=e;a=lb(a,c,b);t(b);return a};e.times=function(a,c,b){a=-1<(a=+a)?a:0;var d=-1,l=G(a);for(c=e.createCallback(c,b,1);++d<a;)l[d]=c(d);return l};e.toArray=function(a){return a&&
"number"==typeof a.length?c(a):Fa(a)};e.transform=function(a,c,b,d){var l=K(a);c=e.createCallback(c,d,4);null==b&&(l?b=[]:(d=(d=a&&a.constructor)&&d.prototype,b=M(d)?oa(d):{}));(l?B:C)(a,function(a,g,d){return c(b,a,g,d)});return b};e.union=function(a){K(a)||(arguments[0]=a?D.call(a):H);return Va(ba.apply(H,arguments))};e.uniq=Va;e.unzip=ib;e.values=Fa;e.where=ra;e.without=function(a){return gb(a,D.call(arguments,1))};e.wrap=function(a,c){return function(){var b=[a];wa.apply(b,arguments);return c.apply(this,
b)}};e.zip=function(a){return a?ib(arguments):[]};e.zipObject=jb;e.collect=Ha;e.drop=Ma;e.each=B;e.extend=Da;e.methods=pa;e.object=jb;e.select=ra;e.tail=Ma;e.unique=Va;nb(e);e.chain=e;e.prototype.chain=function(){return this};e.clone=Ca;e.cloneDeep=function(a,c,b){return Ca(a,!0,c,b)};e.contains=bb;e.escape=function(a){return null==a?"":S(a).replace(Gb,na)};e.every=cb;e.find=Ga;e.findIndex=function(a,c,b){var d=-1,l=a?a.length:0;for(c=e.createCallback(c,b);++d<l;)if(c(a[d],d,a))return d;return-1};
e.findKey=function(a,c,b){var d;c=e.createCallback(c,b);C(a,function(a,b,g){if(c(a,b,g))return d=b,!1});return d};e.has=function(a,c){return a?E.call(a,c):!1};e.identity=Na;e.indexOf=Ya;e.isArguments=function(a){return F.call(a)==ha};e.isArray=K;e.isBoolean=function(a){return!0===a||!1===a||F.call(a)==da};e.isDate=function(a){return a?"object"==typeof a&&F.call(a)==ea:!1};e.isElement=function(a){return a?1===a.nodeType:!1};e.isEmpty=function(a){var c=!0;if(!a)return c;var b=F.call(a),d=a.length;if(b==
qa||(b==Z||b==ha)||b==U&&"number"==typeof d&&T(a.splice))return!d;C(a,function(){return c=!1});return c};e.isEqual=$;e.isFinite=function(a){return Db(a)&&!Eb(parseFloat(a))};e.isFunction=T;e.isNaN=function(a){return $a(a)&&a!=+a};e.isNull=function(a){return null===a};e.isNumber=$a;e.isObject=M;e.isPlainObject=Ea;e.isRegExp=function(a){return a?"object"==typeof a&&F.call(a)==ga:!1};e.isString=ia;e.isUndefined=function(a){return"undefined"==typeof a};e.lastIndexOf=function(a,c,b){var d=a?a.length:0;
for("number"==typeof b&&(d=(0>b?O(0,d+b):sa(b,d-1))+1);d--;)if(a[d]===c)return d;return-1};e.mixin=nb;e.noConflict=function(){f._=Ab;return this};e.parseInt=xa;e.random=function(a,c){null==a&&null==c&&(c=1);a=+a||0;null==c?(c=a,a=0):c=+c||0;var b=qb();return a%1||c%1?a+sa(b*(c-a+parseFloat("1e-"+((b+"").length-1))),c):a+pb(b*(c-a+1))};e.reduce=Ja;e.reduceRight=eb;e.result=function(a,c){var b=a?a[c]:l;return T(b)?a[c]():b};e.runInContext=b;e.size=function(a){var c=a?a.length:0;return"number"==typeof c?
c:L(a).length};e.some=fb;e.sortedIndex=hb;e.template=function(a,c,b){var d=e.templateSettings;a||(a="");b=Ua({},b,d);var f=Ua({},b.imports,d.imports),d=L(f),f=Fa(f),m,q=0,k=b.interpolate||za,r="__p += '",k=Qa((b.escape||za).source+"|"+k.source+"|"+(k===sb?Hb:za).source+"|"+(b.evaluate||za).source+"|$","g");a.replace(k,function(c,b,d,e,l,h){d||(d=e);r+=a.slice(q,h).replace(Ib,v);b&&(r+="' +\n__e("+b+") +\n'");l&&(m=!0,r+="';\n"+l+";\n__p += '");d&&(r+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");
q=h+c.length;return c});var r=r+"';\n",p=k=b.variable;p||(k="obj",r="with ("+k+") {\n"+r+"\n}\n");r=(m?r.replace(Jb,""):r).replace(Kb,"$1").replace(Lb,"$1;");r="function("+k+") {\n"+(p?"":k+" || ("+k+" = {});\n")+"var __t, __p = '', __e = _.escape"+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+r+"return __p\n}";b="\n/*\n//@ sourceURL="+(b.sourceURL||"/lodash/template/source["+Mb++ +"]")+"\n*/";try{var t=Pa(d,"return "+r+b).apply(l,f)}catch(x){throw x.source=
r,x;}if(c)return t(c);t.source=r;return t};e.unescape=function(a){return null==a?"":S(a).replace(Nb,vb)};e.uniqueId=function(a){var c=++Ob;return S(null==a?"":a)+c};e.all=cb;e.any=fb;e.detect=Ga;e.findWhere=Ga;e.foldl=Ja;e.foldr=eb;e.include=bb;e.inject=Ja;C(e,function(a,c){e.prototype[c]||(e.prototype[c]=function(){var c=[this.__wrapped__];wa.apply(c,arguments);return a.apply(e,c)})});e.first=La;e.last=function(a,b,d){if(a){var l=0,f=a.length;if("number"!=typeof b&&null!=b){var m=f;for(b=e.createCallback(b,
d);m--&&b(a[m],m,a);)l++}else if(l=b,null==l||d)return a[f-1];return c(a,O(0,f-l))}};e.take=La;e.head=La;C(e,function(a,c){e.prototype[c]||(e.prototype[c]=function(c,b){var d=a(this.__wrapped__,c,b);return null==c||b&&"function"!=typeof c?d:new r(d)})});e.VERSION="1.3.1";e.prototype.toString=function(){return S(this.__wrapped__)};e.prototype.value=ob;e.prototype.valueOf=ob;B(["join","pop","shift"],function(a){var c=H[a];e.prototype[a]=function(){return c.apply(this.__wrapped__,arguments)}});B(["push",
"reverse","sort","unshift"],function(a){var c=H[a];e.prototype[a]=function(){c.apply(this.__wrapped__,arguments);return this}});B(["concat","slice","splice"],function(a){var c=H[a];e.prototype[a]=function(){return new r(c.apply(this.__wrapped__,arguments))}});return e}var l,r=[],x=[],Ob=0,aa={},Aa=+new Date+"",Ka=75,na=40,Jb=/\b__p \+= '';/g,Kb=/\b(__p \+=) '' \+/g,Lb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nb=/&(?:amp|lt|gt|quot|#39);/g,Hb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xb=/\w*$/,sb=/<%=([\s\S]+?)%>/g,
ma=(ma=/\bthis\b/)&&ma.test(b)&&ma,tb=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",Fb=RegExp("^["+tb+"]*0+(?=.$)"),za=/($^)/,Gb=/[&<>"']/g,Ib=/['\n\r\t\u2028\u2029\\]/g,yb="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),Mb=0,ha="[object Arguments]",qa="[object Array]",da="[object Boolean]",ea="[object Date]",
rb="[object Function]",fa="[object Number]",U="[object Object]",ga="[object RegExp]",Z="[object String]",N={};N[rb]=!1;N[ha]=N[qa]=N[da]=N[ea]=N[fa]=N[U]=N[ga]=N[Z]=!0;var I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Ba={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Y=I[typeof exports]&&exports,Wa=I[typeof module]&&module&&module.exports==Y&&module,J=I[typeof global]&&global;!J||J.global!==J&&J.window!==J||(a=J);var W=b();"function"==
typeof define&&"object"==typeof define.amd&&define.amd?(a._=W,define(function(){return W})):Y&&!Y.nodeType?Wa?(Wa.exports=W)._=W:Y._=W:a._=W})(this);!function(){function a(a){this.s=null!==a&&void 0!==a?"string"===typeof a?a:a.toString():a;this.orig=a;null!==a&&void 0!==a?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=a.length:this.length=-1}function d(c){return new a(c)}function k(a,b){var d=[],f;for(f=0;f<a.length;f++)d.push(a[f]),b&&b.call(a,a[f],f);return d}var f={},m=String.prototype,p=a.prototype={between:function(c,b){var d=this.s,f=d.indexOf(c),m=d.indexOf(b),q=f+c.length;return new a(m>
f?d.slice(q,m):"")},camelize:function(){var c=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(a,c,d){return d?d.toUpperCase():""});return new a(c)},capitalize:function(){return new a(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(a){return this.s.charAt(a)},chompLeft:function(c){var b=this.s;return 0===b.indexOf(c)?(b=b.slice(c.length),new a(b)):this},chompRight:function(c){if(this.endsWith(c)){var b=this.s,b=b.slice(0,b.length-c.length);return new a(b)}return this},
collapseWhitespace:function(){var c=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new a(c)},contains:function(a){return 0<=this.s.indexOf(a)},count:function(a){for(var b=0,d=this.s.indexOf(a);0<=d;)b+=1,d=this.s.indexOf(a,d+1);return b},dasherize:function(){var c=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new a(c)},decodeHtmlEntities:function(){var c=this.s,c=c.replace(/&#(\d+);?/g,function(a,c){return String.fromCharCode(c)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,
function(a,c){return String.fromCharCode(parseInt(c,16))}).replace(/&([^;\W]+;?)/g,function(a,c){var d=c.replace(/;$/,""),d=f[c]||c.match(/;$/)&&f[d];return"number"===typeof d?String.fromCharCode(d):"string"===typeof d?d:a});return new a(c)},endsWith:function(a){var b=this.s.length-a.length;return 0<=b&&this.s.indexOf(a,b)===b},escapeHTML:function(){return new a(this.s.replace(/[&<>"']/g,function(a){return"&"+s[a]+";"}))},ensureLeft:function(c){var b=this.s;return 0===b.indexOf(c)?this:new a(c+b)},
ensureRight:function(c){var b=this.s;return this.endsWith(c)?this:new a(b+c)},humanize:function(){if(null===this.s||void 0===this.s)return new a("");var c=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new a(c)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&
this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(c){return 0<=c?(c=this.s.substr(0,c),new a(c)):this.right(-c)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(c,b){b=b||" ";if(this.s.length>=c)return new a(this.s);c-=this.s.length;var d=Array(Math.ceil(c/2)+1).join(b),f=Array(Math.floor(c/2)+1).join(b);return new a(d+this.s+f)},padLeft:function(c,
b){b=b||" ";return this.s.length>=c?new a(this.s):new a(Array(c-this.s.length+1).join(b)+this.s)},padRight:function(c,b){b=b||" ";return this.s.length>=c?new a(this.s):new a(this.s+Array(c-this.s.length+1).join(b))},parseCSV:function(a,b,d,f){a=a||",";d=d||"\\";"undefined"==typeof b&&(b='"');var m=0,q=[],k=[],p=this.s.length,t=!1;if("undefined"!==typeof f)var s=[];for(b||(t=!0);m<p;){var v=this.s.charAt(m);switch(v){case d:if(t&&(d!==b||this.s.charAt(m+1)===b)){m+=1;q.push(this.s.charAt(m));break}if(d!==
b)break;case b:t=!t;break;case a:t&&b?q.push(v):(k.push(q.join("")),q.length=0);break;case f:t?q.push(v):s&&(k.push(q.join("")),s.push(k),k=[],q.length=0);break;default:t&&q.push(v)}m+=1}k.push(q.join(""));return s?(s.push(k),s):k},replaceAll:function(c,b){var d=this.s.split(c).join(b);return new a(d)},right:function(c){return 0<=c?(c=this.s.substr(this.s.length-c,c),new a(c)):this.left(-c)},slugify:function(){var c=(new a(this.s.replace(/[^\w\s-]/g,"").toLowerCase())).dasherize().s;"-"===c.charAt(0)&&
(c=c.substr(1));return new a(c)},startsWith:function(a){return 0===this.s.lastIndexOf(a,0)},stripPunctuation:function(){return new a(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var c=this.s;k(0<arguments.length?arguments:[""],function(a){c=c.replace(RegExp("</?"+a+"[^<>]*>","gi"),"")});return new a(c)},template:function(c,b,l){var f=this.s;b=b||d.TMPL_OPEN;l=l||d.TMPL_CLOSE;(f.match(RegExp(b+"(.+?)"+l,"g"))||[]).forEach(function(a){var d=a.substring(b.length,a.length-
l.length);c[d]&&(f=f.replace(a,c[d]))});return new a(f)},times:function(c){return new a(Array(c+1).join(this.s))},toBoolean:function(){if("string"===typeof this.orig){var a=this.s.toLowerCase();return"true"===a||"yes"===a||"on"===a}return!0===this.orig||1===this.orig},toFloat:function(a){var b=parseFloat(this.s);return a?parseFloat(b.toFixed(a)):b},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var c;c="undefined"===typeof m.trim?this.s.replace(/(^\s*|\s*$)/g,
""):this.s.trim();return new a(c)},trimLeft:function(){var c;c=m.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,"");return new a(c)},trimRight:function(){var c;c=m.trimRight?this.s.trimRight():this.s.replace(/\s+$/,"");return new a(c)},truncate:function(c,b){var d=this.s;c=~~c;b=b||"...";if(d.length<=c)return new a(d);var f=d.slice(0,c+1).replace(/.(?=\W*\w*$)/g,function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "}),f=f.slice(f.length-2).match(/\w\w/)?f.replace(/\s*\S+$/,""):(new a(f.slice(0,
f.length-1))).trimRight().s;return(f+b).length>d.length?new a(d):new a(d.slice(0,f.length)+b)},toCSV:function(c,b){var d=",",f='"',m="\\",q=!0,k=!1,p=[];"object"===typeof c?(d=c.delimiter||d,d=c.separator||d,f=c.qualifier||f,q=!!c.encloseNumbers,m=c.escape||m,k=!!c.keys):"string"===typeof c&&(d=c);"string"===typeof b&&(f=b);null===b&&(f=null);if(this.orig instanceof Array)p=this.orig;else for(var t in this.orig)this.orig.hasOwnProperty(t)&&(k?p.push(t):p.push(this.orig[t]));m+=f;k=[];for(t=0;t<p.length;++t){var s=
null!==f&&""!==f;"number"==typeof p[t]&&(s&=q);s&&k.push(f);if(null!==p[t]&&void 0!==p[t]){var v=(new a(p[t])).replaceAll(f,m).s;k.push(v)}else k.push("");s&&k.push(f);d&&k.push(d)}k.length-=1;return new a(k.join(""))},toString:function(){return this.s},underscore:function(){var c=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();(new a(this.s.charAt(0))).isUpper()&&(c="_"+c);return new a(c)},unescapeHTML:function(){return new a(this.s.replace(/\&([^;]+);/g,
function(a,b){var d;return b in A?A[b]:(d=b.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(d[1],16)):(d=b.match(/^#(\d+)$/))?String.fromCharCode(~~d[1]):a}))},valueOf:function(){return this.s.valueOf()}},q=[],v=function(){var a;a=[];if(Object.getOwnPropertyNames)a=Object.getOwnPropertyNames(m),a.splice(a.indexOf("valueOf"),1),a.splice(a.indexOf("toString"),1);else{var b={},d;for(d in String.prototype)b[d]=d;for(d in Object.prototype)delete b[d];for(d in b)a.push(d)}b={};for(d=0;d<a.length;++d){var f=
a[d],k=m[f];try{var q=typeof k.apply("teststring",[]);b[f]=q}catch(p){}}return b}(),w;for(w in v)(function(c){var b=m[c];"function"==typeof b&&(p[c]||(p[c]="string"===v[c]?function(){return new a(b.apply(this,arguments))}:b))})(w);p.repeat=p.times;p.include=p.contains;p.toInteger=p.toInt;p.toBool=p.toBoolean;p.decodeHTMLEntities=p.decodeHtmlEntities;d.extendPrototype=function(){for(var a in p)(function(a){var c=p[a];m.hasOwnProperty(a)||(q.push(a),m[a]=function(){String.prototype.s=this;return c.apply(this,
arguments)})})(a)};d.restorePrototype=function(){for(var a=0;a<q.length;++a)delete String.prototype[q[a]];q.length=0};d.VERSION="1.5.0";d.TMPL_OPEN="{{";d.TMPL_CLOSE="}}";d.ENTITIES=f;"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=d:"function"===typeof define&&define.amd?define([],function(){return d}):window.S=d;var A={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},s={},t;for(t in A)s[A[t]]=t;f={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,
"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,
"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,
"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,
"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this);(function(){this.H={Check:{},TennisScoreKeeper:{}}}).call(this);(function(a){function d(d){return d===a||null===d}function k(a){this.isBetweenInclusive=function(d,f){return a>=d&&a<=f};this.isBetweenExclusive=function(d,f){return a>d&&a<f}}function f(a,d){var k=typeof a,v=typeof d;if(null===a&&null===d)return!0;if(k!==v)return!1;if("object"!==k&&"object"!==v)return a==d;var k=!0,w;for(w in a)if("function"!==typeof a[w]&&(k=k&&f(a[w],d[w]),!k))return!1;return!0}this.notEmpty=function(d,f){if(d===a||null===d)throw Error("Parameter '"+f+"' cannot be null or undefined");
};this.condition=function(a,d){if(!a)throw Error(d||"An error occured");};this.isEmpty=d;this.isNotEmpty=function(a){return!d(a)};this.areSame=f;this.value=function(a){return new k(a)}}).call(this.H.Check);(function(a,d,k){function f(d,c,b){a.condition("15b6d1fc81a043c081242617308b4fdc"===b,"GameTieMode must not be instantiated. Use TieMode enum.");a.notEmpty(d,"id");a.notEmpty(c,"pointByDifferenceFunc");a.condition("function"===typeof c,"pointByDifferenceFunc must be a function returning tennisPoint via point difference");this.PointByDifference=function(a){return c.call(null,a)};this.id=d}function m(d){a.notEmpty(d,"label");this.label=d;this.id=q(d)}function p(d,c,b,f){a.condition("82ee546ae51f4a77a048186fa13e98f1"===
f,"PointType must not be instantiated. Use PointTypes enum.");a.notEmpty(c,"label");a.notEmpty(b,"shotStyle");a.condition(d===s.PointWinner||d===s.PointLoser,"Point credit goes to winner or loser. Use pointCreditTypes enum");this.label=c;this.creditTo=d;this.shotStyle=b;this.id=q(c)}function q(a){return d(a).trim().replaceAll(" ","").replaceAll("/","-").s}var v={Love:{id:"Love",code:"0"},Fifteen:{id:"Fifteen",code:"15"},Thirty:{id:"Thirty",code:"30"},Fourty:{id:"Fourty",code:"40"},Advantage:{id:"Advantage",
code:"Ad"}},w={advantageWin:new f("AdvantageWin",function(d){a.condition(a.value(d).isBetweenInclusive(-1,1),"Something is wrong, point difference must be [-1,1]");return a.value(d).isBetweenInclusive(-1,0)?v.Fourty:1===d?v.Advantage:v.Love},"15b6d1fc81a043c081242617308b4fdc"),singlePointWin:new f("SinglePointWin",function(d){a.condition(a.value(d).isBetweenInclusive(-1,1),"Something is wrong, point difference must be [-1,1]");return 0===d?v.Fourty:v.Love},"15b6d1fc81a043c081242617308b4fdc")},A={tiebreak:{id:"TieBreak",
minimumGamePoints:7},superTiebreak:{id:"SuperTieBreak",minimumGamePoints:10},gameDifference:{id:"GameDifference",minimumGamePoints:4}};k={NormalPassing:new m("Normal/Passing"),Smash:new m("Smash"),Lob:new m("Lob"),Drop:new m("Drop")};var s={PointWinner:0,PointLoser:1};this.Model={Player:function(d){a.notEmpty(d,"name");this.name=d;this.id=q(d)},MatchDefinition:function(d,c,b){a.notEmpty(d,"playerOne");a.notEmpty(c,"playerTwo");this.players=[d,c];this.gamesPerSet=6;this.setsCount=3;this.gameTieMode=
w.advantageWin;this.lastSetTieMode=A.tiebreak;this.startingPlayer=b?c:d},TieMode:w,LastSetTieMode:A,Point:function(d,c,b,f){a.notEmpty(d,"forPlayer");a.notEmpty(c,"creditedTo");a.notEmpty(b,"type");this.player=d;this.creditedTo=c;this.timestamp=new Date;this.type=b;this.isOnSecondServe=f},ShotStyles:k,PointCreditTypes:s,PointTypes:{WinningShot:function(a){return new p(s.PointWinner,"Winning Shot",a,"82ee546ae51f4a77a048186fa13e98f1")},ForcedError:function(a){return new p(s.PointWinner,"Forced Error",
a,"82ee546ae51f4a77a048186fa13e98f1")},UnforcedError:function(a){return new p(s.PointLoser,"Unforced Error",a,"82ee546ae51f4a77a048186fa13e98f1")},Ace:function(a){return new p(s.PointWinner,"Ace",a,"82ee546ae51f4a77a048186fa13e98f1")},DoubleFault:function(a){return new p(s.PointLoser,"Double Fault",a,"82ee546ae51f4a77a048186fa13e98f1")}},PointType:p,TennisPoints:v}}).call(this.H.TennisScoreKeeper,this.H.Check,this.S);(function(a,d,k){function f(f){a.notEmpty(f,"player");this.Player=f;this.Game=d.TennisPoints.Love;this.Sets=this.Games=this.GamePoints=0}function m(d,f,k,m){a.notEmpty(d,"playerOneScoreProjection");a.notEmpty(f,"playerTwoScoreProjection");a.notEmpty(k,"setsPerMatch");a.notEmpty(m,"servingPlayer");var p=this,t=Math.ceil(k/2);this.PlayerOne=d;this.PlayerTwo=f;this.Winner=function(){return d.Sets===t?d:f.Sets===t?f:null};this.IsWon=function(){return null!==p.Winner()};this.ServingPlayer=function(){return m}}
var p=[d.TennisPoints.Love,d.TennisPoints.Fifteen,d.TennisPoints.Thirty,d.TennisPoints.Fourty];this.ScoreProjector=function(k){function v(c,b){c.GamePoints++;var f;f=c.Games===k.gamesPerSet&&b.Games===k.gamesPerSet;f=c.Sets===b.Sets&&c.Sets===Math.floor(k.setsCount/2)?f&&k.lastSetTieMode!==d.LastSetTieMode.gameDifference:f;f?(t=s,0!==(c.GamePoints+b.GamePoints)%2&&A(),2<=c.GamePoints-b.GamePoints&&c.GamePoints>=(c.Sets===b.Sets&&c.Sets===Math.floor(k.setsCount/2)?k.lastSetTieMode.minimumGamePoints:
7)&&(s=t===c.Player?b.Player:c.Player,w(c,b),c.Games=0,b.Games=0,c.Sets++)):3>=c.GamePoints?c.Game=p[c.GamePoints]:a.value(c.GamePoints-b.GamePoints).isBetweenInclusive(-1,1)?(f=c.GamePoints-b.GamePoints,c.Game=k.gameTieMode.PointByDifference(f),b.Game=k.gameTieMode.PointByDifference(-f),0<f&&(c.Game==d.TennisPoints.Love&&b.Game==d.TennisPoints.Love)&&w(c,b)):w(c,b)}function w(a,b){a.Game=d.TennisPoints.Love;b.Game=d.TennisPoints.Love;a.GamePoints=0;b.GamePoints=0;a.Games++;A();2<=a.Games-b.Games&&
a.Games>=k.gamesPerSet&&(a.Games=0,b.Games=0,a.Sets++)}function A(){s=s===k.players[0]?k.players[1]:k.players[0]}a.notEmpty(k,"gameDefinition");var s=k.startingPlayer,t=null;this.toTennisScore=function(c){a.notEmpty(c,"points");var b=new f(k.players[0]),d=new f(k.players[1]);s=k.startingPlayer;for(var p=0;p<c.length;p++)c[p].player===b.Player?v(b,d):v(d,b);return new m(b,d,k.setsCount,s)}}}).call(this.H.TennisScoreKeeper,this.H.Check,this.H.TennisScoreKeeper.Model);(function(a,d,k){function f(f){a.notEmpty(f,"players");a.condition(2===f.length,"The match must have exactly two players");this.pointFor=function(a,k,m){var A=a===f[0]?f[1]:f[0];return new d.Point(a,k.creditTo===d.PointCreditTypes.PointWinner?a:A,k,!0===m?!0:!1)}}var m=this;this.Engine=function(d){a.notEmpty(d,"gameDefinition");var k=[],v=new f(d.players),w=[],A=new m.ScoreProjector(d),w=[d.players[0],d.players[1]];this.scorePointFor=function(a,d,c){a=v.pointFor(a,d,c);k.push(a)};this.undoLatestPoint=
function(){0!==k.length&&k.pop()};this.players=w;this.points=k;this.tennisScore=function(){return A.toTennisScore(k)}};this.PointFactory=f}).call(this.H.TennisScoreKeeper,this.H.Check,this.H.TennisScoreKeeper.Model,this._);